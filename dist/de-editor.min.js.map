{"version":3,"file":"de-editor.min.js","mappings":"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","sources":["webpack://LoadEditor/./src/utils/utils.ts","webpack://LoadEditor/external var \"OpenSeadragon\"","webpack://LoadEditor/./index.ts","webpack://LoadEditor/./src/utils/setCookie.ts","webpack://LoadEditor/./src/components/annotation_slider/main.ts","webpack://LoadEditor/./src/components/full_screen/main.ts","webpack://LoadEditor/./src/components/font_size/main.ts","webpack://LoadEditor/./src/components/font_family/main.ts","webpack://LoadEditor/./src/components/image_switch/main.ts","webpack://LoadEditor/./src/components/image_loader/main.ts","webpack://LoadEditor/./src/components/image_loader/pagination.ts","webpack://LoadEditor/./src/components/image_loader/resize.ts","webpack://LoadEditor/./src/components/search_params/main.ts","webpack://LoadEditor/./src/components/multi_language/main.ts","webpack://LoadEditor/webpack/bootstrap","webpack://LoadEditor/webpack/runtime/define property getters","webpack://LoadEditor/webpack/runtime/hasOwnProperty shorthand","webpack://LoadEditor/webpack/runtime/make namespace object","webpack://LoadEditor/webpack/startup"],"sourcesContent":["// ## functions for accessing parsed class and adding or removing markup\n// by adding or removing classes. classes should hold CSS stylsheets\n// defined by the user separately.\nexport function removeMarkup(html_class, css_class, color, hide, style) {\n    // find all provided classes\n    var selected = document.querySelectorAll(`.${html_class}`);\n    selected.forEach((el) => {\n        // in case classes come as object of two classes\n        // one of the classes must be part in HTML dom\n        // if one is present it is removed and another class added\n        // lets you control CSS styles\n        if (css_class instanceof Object) {\n            css_class.forEach((css) => {\n                if (el.classList.contains(css)) {\n                    el.classList.remove(css);\n                }\n                else {\n                    el.classList.add(css);\n                }\n            });\n            // if classes are a simple string\n            // removes additional class\n        }\n        else {\n            el.classList.remove(css_class);\n        }\n        // removes color class\n        el.classList.remove(color);\n        // adds additional class for element styling\n        el.classList.add(style.css_class);\n    });\n    // if hide is true it sets display to none\n    if (hide) {\n        try {\n            var hde = hide.hidden;\n        }\n        catch (err) {\n            console.log(`aot hide.hidden not found ${err}`);\n            var hde = false;\n        }\n        try {\n            var cls = hide.class;\n        }\n        catch (err) {\n            console.log(`aot hide.hidden not found ${err}`);\n            var cls = \"\";\n        }\n        if (hde && cls) {\n            let hde = document.querySelectorAll(`.${cls}`);\n            hde.forEach((el) => {\n                el.style.display = \"none\";\n            });\n        }\n    }\n    // returns number of nodes found as string\n    return String(selected.length);\n}\n// same logic as above but for adding classes\nexport function addMarkup(html_class, css_class, color, hide, style) {\n    var selected = document.querySelectorAll(`.${html_class}`);\n    selected.forEach((el) => {\n        if (css_class instanceof Object) {\n            css_class.forEach((css) => {\n                if (el.classList.contains(css)) {\n                    el.classList.remove(css);\n                }\n                else {\n                    el.classList.add(css);\n                }\n            });\n        }\n        else {\n            el.classList.add(css_class);\n        }\n        el.classList.add(color);\n        el.classList.add(style.css_class);\n    });\n    if (hide) {\n        try {\n            var hde = hide.hidden;\n        }\n        catch (err) {\n            console.log(`aot hide.hidden not found ${err}`);\n            var hde = false;\n        }\n        try {\n            var cls = hide.class;\n        }\n        catch (err) {\n            console.log(`aot hide.hidden not found ${err}`);\n            var cls = \"\";\n        }\n        if (hde && cls) {\n            let hde = document.querySelectorAll(`.${cls}`);\n            hde.forEach((el) => {\n                el.style.display = \"inline\";\n            });\n        }\n    }\n    return String(selected.length);\n}\nexport function uptState(options) {\n    if (options.hist) {\n        // update url and state of history\n        window.history.replaceState({}, \"\", options.href);\n    }\n    if (options.state) {\n        window.history.pushState(options.state, \"\", options.href);\n    }\n    if (options.cit) {\n        options.cit.innerHTML = `${location.hostname}${location.pathname}${options.href}`;\n        options.cit.setAttribute(\"href\", options.href);\n    }\n}\nexport function hideLoading(id) {\n    let spinnerID = \"spinner_\" + id;\n    if (document.getElementById(spinnerID) !== null) {\n        document.getElementById(spinnerID).remove();\n    }\n}\nexport function paramCheck(param, def) {\n    if (param) {\n        return param;\n    }\n    else {\n        return def;\n    }\n}\n","module.exports = OpenSeadragon;","const { SetDataCookie } = require(\"./src/utils/setCookie\");\n(\"use strict\");\nclass LoadEditor {\n    constructor(options) {\n        /*\n            define configuration options\n            verify if option object is available and has specific key\n            if options are not available all key hold default values\n            if one or several keys are not available, only these keys will hold default values\n            */\n        if (options && \"aot\" in options) {\n            this.aot = options.aot;\n            var { AnnotationSlider, } = require(\"./src/components/annotation_slider/main\");\n        }\n        if (options && \"fs\" in options) {\n            this.fs = options.fs;\n            var { FullSize } = require(\"./src/components/full_screen/main\");\n        }\n        if (options && \"fos\" in options) {\n            this.fos = options.fos;\n            var { FontSize } = require(\"./src/components/font_size/main\");\n        }\n        if (options && \"ff\" in options) {\n            this.ff = options.ff;\n            var { FontFamily } = require(\"./src/components/font_family/main\");\n        }\n        if (options && \"is\" in options) {\n            this.is = options.is;\n            console.log(\"Warning 001: ImageSwitch parameter 'is' requires OpenSeadragon library: https://openseadragon.github.io/\");\n            var { ImageSwitch } = require(\"./src/components/image_switch/main\");\n        }\n        if (options && \"il\" in options) {\n            this.il = options.il;\n            console.log(\"Warning 002: ImageLoader parameter 'il' requires OpenSeadragon library: https://openseadragon.github.io/\");\n            var { ImageLoader } = require(\"./src/components/image_loader/main\");\n        }\n        if (options && \"ep\" in options) {\n            this.ep = options.ep;\n            console.log(\"Warning 003: Edition Pagination parameter 'ep' requires OpenSeadragon library: https://openseadragon.github.io/\");\n            var { EditionPagination, } = require(\"./src/components/image_loader/pagination\");\n        }\n        if (options && \"wr\" in options && options.wr === true) {\n            this.wr = options.wr;\n            var { WindowResize } = require(\"./src/components/image_loader/resize\");\n        }\n        if (options && \"up\" in options && options.up === true) {\n            this.up = options.up;\n            var { UrlSearchParamUpdate, } = require(\"./src/components/search_params/main\");\n            // initialize imported functions\n            this.upc = new UrlSearchParamUpdate();\n        }\n        if (options && \"lang\" in options) {\n            this.lang = options.lang;\n            var { MultiLanguage } = require(\"./src/components/multi_language/main\");\n        }\n        // set cookies if config options is available\n        if (this.aot) {\n            try {\n                new SetDataCookie(\"annotation_slider\", this.aot).build();\n            }\n            catch (e) {\n                console.log(e);\n            }\n        }\n        if (this.fs) {\n            try {\n                new SetDataCookie(\"fullsize\", this.fs).build();\n            }\n            catch (e) {\n                console.log(e);\n            }\n        }\n        if (this.fos) {\n            try {\n                new SetDataCookie(\"fontsize\", this.fos).build();\n            }\n            catch (e) {\n                console.log(e);\n            }\n        }\n        if (this.ff) {\n            try {\n                new SetDataCookie(\"font_family\", this.ff).build();\n            }\n            catch (e) {\n                console.log(e);\n            }\n        }\n        if (this.il) {\n            try {\n                new SetDataCookie(\"image_loader\", this.il).build();\n            }\n            catch (e) {\n                console.log(e);\n            }\n        }\n        if (this.is) {\n            try {\n                new SetDataCookie(\"image_switch\", this.is).build();\n            }\n            catch (e) {\n                console.log(e);\n            }\n        }\n        if (this.ep) {\n            try {\n                new SetDataCookie(\"ed_pagination\", this.ep).build();\n            }\n            catch (e) {\n                console.log(e);\n            }\n        }\n        if (this.lang) {\n            try {\n                new SetDataCookie(\"multi_language\", this.lang).build();\n            }\n            catch (e) {\n                console.log(e);\n            }\n        }\n        // defines custom elements and assigns a class\n        // renders html node and adds function\n        // window onload triggers paramUrl functions\n        if (this.ep) {\n            try {\n                window.customElements.define(\"edition-pagination\", EditionPagination);\n            }\n            catch (e) {\n                console.log(e);\n            }\n        }\n        if (this.aot) {\n            try {\n                window.customElements.define(\"annotation-slider\", AnnotationSlider);\n                if (this.up) {\n                    window.onload = this.upc.textFeatures();\n                }\n            }\n            catch (e) {\n                console.log(e);\n            }\n        }\n        if (this.fs) {\n            try {\n                window.customElements.define(\"full-size\", FullSize);\n                if (this.up) {\n                    window.onload = this.upc.fullSreen();\n                }\n            }\n            catch (e) {\n                console.log(e);\n            }\n        }\n        if (this.fos) {\n            try {\n                window.customElements.define(\"font-size\", FontSize);\n                if (this.up) {\n                    window.onload = this.upc.fontSize();\n                }\n            }\n            catch (e) {\n                console.log(e);\n            }\n        }\n        if (this.ff) {\n            try {\n                window.customElements.define(\"font-family\", FontFamily);\n                if (this.up) {\n                    window.onload = this.upc.fontFamily();\n                }\n            }\n            catch (e) {\n                console.log(e);\n            }\n        }\n        if (this.wr) {\n            try {\n                window.customElements.define(\"window-resize\", WindowResize);\n            }\n            catch (e) {\n                console.log(e);\n            }\n        }\n        if (this.is) {\n            try {\n                window.customElements.define(\"image-switch\", ImageSwitch);\n                if (this.up) {\n                    window.onload = this.upc.viewerSwitch();\n                }\n            }\n            catch (e) {\n                console.log(e);\n            }\n        }\n        if (this.il) {\n            try {\n                window.customElements.define(\"image-loader\", ImageLoader);\n                if (this.up) {\n                    window.onload = this.upc.pageUrl();\n                }\n            }\n            catch (e) {\n                console.log(e);\n            }\n        }\n        if (this.lang) {\n            try {\n                window.customElements.define(\"multi-language\", MultiLanguage);\n                if (this.up) {\n                    window.onload = this.upc.multiLanguage();\n                }\n            }\n            catch (e) {\n                console.log(e);\n            }\n        }\n        // onpopstate = browser back and forward button to recognize classes\n        window.onpopstate = () => {\n            if (this.aot && this.up) {\n                try {\n                    this.upc.textFeatures();\n                }\n                catch (e) {\n                    console.log(e);\n                }\n            }\n            if (this.fs && this.up) {\n                try {\n                    this.upc.fullSreen();\n                }\n                catch (e) {\n                    console.log(e);\n                }\n            }\n            if (this.fos && this.up) {\n                try {\n                    this.upc.fontSize();\n                }\n                catch (e) {\n                    console.log(e);\n                }\n            }\n            if (this.ff && this.up) {\n                try {\n                    this.upc.fontFamily();\n                }\n                catch (e) {\n                    console.log(e);\n                }\n            }\n            if (this.is && this.up) {\n                try {\n                    this.upc.viewerSwitch();\n                }\n                catch (e) {\n                    console.log(e);\n                }\n            }\n            if (this.il && this.up) {\n                try {\n                    this.upc.pageUrl();\n                }\n                catch (e) {\n                    console.log(e);\n                }\n            }\n            if (this.lang && this.up) {\n                try {\n                    this.upc.multiLanguage();\n                }\n                catch (e) {\n                    console.log(e);\n                }\n            }\n        };\n        window.onload = () => {\n            if (window.location.hash == \"\") {\n                return false;\n            }\n            else {\n                var el = document.querySelector(window.location.hash);\n                if (el !== null) {\n                    el.scrollIntoView({ behavior: \"smooth\" });\n                    el.style.backgroundColor = \"#FFFCA1\";\n                    setTimeout(function () {\n                        el.style.backgroundColor = \"transparent\";\n                    }, 10000);\n                }\n            }\n        };\n    }\n}\nmodule.exports = LoadEditor;\n","export class SetDataCookie {\n    constructor(name, config) {\n        this.name = name;\n        this.config = config;\n    }\n    build() {\n        sessionStorage.setItem(this.name, JSON.stringify(this.config));\n    }\n}\n","const { addMarkup, removeMarkup, uptState, paramCheck, } = require(\"../../utils/utils\");\nexport class AnnotationSlider extends HTMLElement {\n    static get observedAttributes() {\n        return [\"opt\"];\n    }\n    connectedCallback() {\n        this.render();\n        this.childNodes[3].childNodes[1].addEventListener(\"click\", this.textFeatures);\n        // console.log(this.childNodes[3].childNodes[1]);\n    }\n    // function to triggers on click of the rendered element\n    textFeatures() {\n        // get session cookie with configartion json\n        let data = \"annotation_slider\";\n        let storage = sessionStorage.getItem(data);\n        if (storage) {\n            let options = JSON.parse(storage);\n            // get current url parameters\n            let url = new URL(window.location.href);\n            // let hash = url.hash;\n            let urlParam = new URLSearchParams(url.search);\n            // get id of rendered html element. opt value of custom element is used as ID.\n            let id = this.getAttribute(\"id\");\n            if (!id) {\n                console.log(\"Error 001 in component annotation slider: \\\n          ID of annotation slider custom child element not found. \\\n          Make sure the annotation-slider element holds the attribute 'opt' with \\\n          a defined string value.\");\n            }\n            // configuration holds an array with variants with at least one variant object.\n            // to match the custom element with the configuration the opt value must match.\n            // variant is found by comparing variant config opt with custom element attr opt\n            try {\n                var variant_check = options.variants.find((v) => v.opt === id);\n            }\n            catch (err) {\n                console.log(\"Error 002 in component annotation slider:\\\n          No option parameters found. Creating default parameters to continue.\");\n            }\n            // variant as selected in UI\n            let variant = paramCheck(variant_check, {\n                opt: id,\n                features: {\n                    all: false,\n                    class: \"single-feature\",\n                },\n            });\n            if (!variant) {\n                console.log(\"Error 003 in component annotation slider:\\\n          No variant found! Please define a variant object that contains \\\n                and 'opt' key holding a string value that matches the 'opt' value of custom \\\n                element 'annotation#slider'.\");\n            }\n            // use try/catch to verify if object exists in options\n            try {\n                var features_check = variant.features;\n            }\n            catch (err) {\n                console.log(\"Message 004 in component annotation slider:\\\n          Features object in variant not found. Creating default parameters.\");\n            }\n            // check if features params of UI variant are available\n            var features = paramCheck(features_check, {\n                all: false,\n                class: \"single-feature\",\n            });\n            // use try/catch to verify if object exists in options\n            try {\n                var variants_check = options.variants.filter((v) => v.features.all === false);\n            }\n            catch (err) {\n                console.log(\"Message 005 in component annotation slider:\\\n          No option parameters found. Creating default parameters to continue.\");\n            }\n            // all variants except all features\n            var variants = paramCheck(variants_check, [\n                {\n                    opt: id,\n                    features: {\n                        all: false,\n                        class: \"single-feature\",\n                    },\n                },\n            ]);\n            // use try/catch to verify if object exists in options\n            try {\n                var none_variant_check = options.variants.filter((v) => v.features.all === true);\n            }\n            catch (err) {\n                console.log(\"Message 006 in component annotation slider:\\\n          No option parameters found. Creating default parameters to continue.\");\n            }\n            // all-features variant\n            var none_variant = paramCheck(none_variant_check, {\n                opt: \"text-features\",\n                features: {\n                    all: true,\n                    class: \"features-1\",\n                },\n            });\n            // use try/catch to verify if object exists in options\n            try {\n                var style_check = options.span_element;\n            }\n            catch (err) {\n                console.log(\"Message 007 in component annotation slider:\\\n        style obj not found. Creating default parameters.\");\n            }\n            var style = paramCheck(style_check, {\n                css_class: \"badge-item\",\n            });\n            var active = paramCheck(options.active_class, \"active\");\n            // variants are either single-feature or all-features\n            // single-features manipulate the DOM based on a given class\n            // all-features control all other single-feature variants\n            // one to control them all (well could be several to control them all)\n            // in control all other sliders the following defines seperates\n            // the all-features variant from others. If one is found it triggers\n            // all sliders by clicking on the all-features slider variant\n            var all = features.all;\n            var allClass = features.class;\n            if (all === true) {\n                // the current state of the annoation slider is set bei adding or\n                // removing a class e.g. 'active'\n                if (this.classList.contains(active)) {\n                    this.classList.remove(active);\n                    // if current state is active remove class/state\n                    // find all element classes in DOM and remove CSS class\n                    variants.forEach((el) => {\n                        if (document.getElementById(el.opt).checked ===\n                            true &&\n                            el.features.class === allClass) {\n                            // for all found DOM elements remove color class and css_class\n                            // if hide is true hide elements with display:none\n                            var color = paramCheck(el.color, `color-${el.opt}`);\n                            let html_class = paramCheck(el.html_class, `html-class-${el.opt}`);\n                            let css_class = paramCheck(el.css_class, `css-class-${el.opt}`);\n                            let hide = paramCheck(el.hide, false);\n                            // besides removing marktup the function 'removemarkup()' returns\n                            // the number of elements nodes found as string\n                            let selected = removeMarkup(html_class, css_class, color, hide, style);\n                            // the color class is also removed from the slider element\n                            var slider_str = paramCheck(el.opt_slider, `${el.opt}-slider`);\n                            try {\n                                let slider = document.getElementById(slider_str);\n                                slider.classList.remove(color);\n                                // the data attrib and class is removed from slider element\n                                slider.removeAttribute(\"data\");\n                                slider.classList.remove(\"slider-number\");\n                            }\n                            catch (err) {\n                                console.log(`Error 008 in component annotation slider: \\\n                slider class ${slider_str} not found!`);\n                            }\n                            // disables the checked value from input element\n                            // as well as the class to define the state\n                            document.getElementById(el.opt).checked =\n                                false;\n                            document.getElementById(el.opt).classList.remove(active);\n                            // access the url params and sets the key to off\n                            urlParam.delete(el.opt);\n                        }\n                    });\n                    // the node count also works on the all-features variant\n                    this.removeAttribute(\"data\");\n                    this.classList.remove(\"slider-number\");\n                }\n                else {\n                    // same functionality as above but with reversed effect\n                    // adds markup, count and changes state to active\n                    var count = 0;\n                    this.classList.add(active);\n                    variants.forEach((el) => {\n                        if (document.getElementById(el.opt).checked ===\n                            false &&\n                            el.features.class === allClass) {\n                            var color = paramCheck(el.color, `color-${el.opt}`);\n                            let html_class = paramCheck(el.html_class, `html-class-${el.opt}`);\n                            let css_class = paramCheck(el.css_class, `css-class-${el.opt}`);\n                            let hide = paramCheck(el.hide, false);\n                            var selected = addMarkup(html_class, css_class, color, hide, style);\n                            var slider_str = paramCheck(el.opt_slider, `${el.opt}-slider`);\n                            try {\n                                let slider = document.getElementById(slider_str);\n                                slider.classList.add(color);\n                                slider.setAttribute(\"data\", selected);\n                                slider.classList.add(\"slider-number\");\n                            }\n                            catch (err) {\n                                console.log(`Message 009 in component annotation slider: \\\n                  slider class ${slider_str} not found!`);\n                            }\n                            document.getElementById(el.opt).checked =\n                                true;\n                            document.getElementById(el.opt).classList.add(active);\n                            urlParam.set(el.opt, \"on\");\n                            count += parseInt(selected);\n                        }\n                    });\n                    this.setAttribute(\"data\", String(count));\n                    this.classList.add(\"slider-number\");\n                }\n            }\n            else if (typeof all !== \"boolean\") {\n                // if the all-features key is not a boolean it displays a waring in the console.\n                console.log(`Error 010 in component annotation slider: \\\n          Type of variant config. \"features.all\" must be Boolean (true or false)`);\n            }\n            else {\n                // if variant is a single-feature this part triggers\n                // either adds or removes markup (classes) depending on the state of the slider\n                var color = paramCheck(variant.color, `color-${variant.opt}`);\n                var html_class = paramCheck(variant.html_class, `html-class-${variant.opt}`);\n                var css_class = paramCheck(variant.css_class, `css-class-${variant.opt}`);\n                var hide = paramCheck(variant.hide, false);\n                var slider_str = paramCheck(variant.opt_slider, `${variant.opt}-slider`);\n                if (this.classList.contains(active)) {\n                    // state == active (remove state and markup)\n                    this.classList.remove(active);\n                    let selected = removeMarkup(html_class, css_class, color, hide, style);\n                    try {\n                        let slider = document.getElementById(slider_str);\n                        slider.classList.remove(color);\n                        slider.removeAttribute(\"data\");\n                        slider.classList.remove(\"slider-number\");\n                    }\n                    catch (err) {\n                        console.log(`Error 011 in component annotation slider: \\\n            slider class ${slider_str} not found!`);\n                    }\n                    this.classList.remove(color);\n                    urlParam.delete(variant.opt);\n                }\n                else {\n                    // state == not active (add state and markup)\n                    this.classList.add(active);\n                    let selected = addMarkup(html_class, css_class, color, hide, style);\n                    try {\n                        let slider = document.getElementById(slider_str);\n                        slider.classList.add(color);\n                        slider.setAttribute(\"data\", selected);\n                        slider.classList.add(\"slider-number\");\n                    }\n                    catch (err) {\n                        console.log(`Error 012 in component annotation slider: \\\n            slider class ${slider_str} not found!`);\n                    }\n                    this.classList.add(color);\n                    urlParam.set(variant.opt, \"on\");\n                }\n                /*\n                  If all or not all annotation-sliders are selected the slider\n                  link will automatically be switched on or off.\n                */\n                var feat_leader = none_variant.find((g) => g.features.class === features.class);\n                if (feat_leader instanceof Object) {\n                    let variants_checked = document.querySelectorAll(`input.${features.class}[aot-type=\"false\"]:checked`);\n                    let variants_group = variants.filter((v) => v.features.all === false && v.features.class === features.class);\n                    if (variants_checked.length === variants_group.length) {\n                        document.getElementById(feat_leader.opt).checked = true;\n                        document.getElementById(feat_leader.opt).classList.add(active);\n                    }\n                    else {\n                        document.getElementById(feat_leader.opt).checked = false;\n                        document.getElementById(feat_leader.opt).classList.remove(active);\n                    }\n                }\n            }\n            // current state of the annotation sliders is saved in the url parameters\n            // current state is also saved in window history (back/forward browser button)\n            var stateName = variant.opt;\n            var state = {\n                [stateName]: \"on/off\",\n            };\n            // try to find elment holding an ID matching the 'chg_citation' string value\n            // get citation url key and HTMLElement\n            var citation_url_str = paramCheck(variant.chg_citation, \"citation-url\");\n            var citation_url = document.getElementById(citation_url_str);\n            let href = `?${urlParam}${location.hash}`;\n            uptState({\n                hist: false,\n                cit: citation_url,\n                state: state,\n                href: href,\n            });\n        }\n    }\n    // function to render HTML element inside the custom element\n    render() {\n        let data = \"annotation_slider\";\n        let storage = sessionStorage.getItem(data);\n        let options = JSON.parse(storage);\n        let opt = this.getAttribute(\"opt\");\n        // check if user set opt attribute\n        if (typeof opt !== \"string\") {\n            console.log(\"Error 013 in component annotation slider: \\\n      No 'opt' attribute in custom element font-family found!\");\n        }\n        // variant is found by comparing variant config opt with custom element attr opt\n        try {\n            var variant_check = options.variants.find((v) => v.opt === opt);\n        }\n        catch (err) {\n            console.log(\"Message 014 in component annotation slider: \\\n        No option parameters found. Creating default parameters to continue.\");\n        }\n        var variant = paramCheck(variant_check, {\n            opt: opt,\n            features: {\n                class: \"features-1\",\n                all: false,\n            },\n        });\n        try {\n            var features_check = variant.features;\n        }\n        catch (err) {\n            console.log(\"Message 015 in component annotation slider: \\\n        Features object in variant not found. Creating default parameters.\");\n        }\n        let features = paramCheck(features_check, {\n            all: false,\n            class: \"feature-1\",\n        });\n        let title = paramCheck(variant.title, \"Text Feature\");\n        let opt_slider = paramCheck(variant.opt_slider, `${opt}-slider`);\n        // check if sizes object with font sizes is not null or undefined\n        try {\n            var rendered_element_check = options.rendered_element;\n        }\n        catch (err) {\n            console.log(\"Message 017 in component annotation slider: \\\n      Hide object not found. Creating default parameters.\");\n        }\n        let rendered_element = paramCheck(rendered_element_check, {\n            label_class: \"switch\",\n            slider_class: \"i-slider round\",\n        });\n        let render_class = paramCheck(rendered_element.label_class, \"switch\");\n        let slider_class = paramCheck(rendered_element.slider_class, \"i-slider round\");\n        this.innerHTML = `\n            <label>${title}</label>\n            <label class=\"${render_class}\">\n                <input title=\"${title}\"\n                    type=\"checkbox\"\n                    id=\"${opt}\"\n                    data-target=\"${data}\"\n                    class=\"${features.class}\"\n                    aot-type=\"${String(features.all)}\"/>\n                <span id=\"${opt_slider}\" class=\"${slider_class}\"></span>\n            </label>\n        `;\n    }\n    attributeChangedCallback() {\n        this.render();\n    }\n    disconnectedCallback() {\n        this.childNodes[3].childNodes[1].removeEventListener(\"click\", this.textFeatures);\n    }\n}\n","const { uptState, paramCheck } = require(\"../../utils/utils\");\nexport class FullSize extends HTMLElement {\n    static get observedAttributes() {\n        return [\"opt\"];\n    }\n    connectedCallback() {\n        this.render();\n        // console.log(this.childNodes[3]);\n        this.childNodes[3].addEventListener(\"click\", this.fullScreen);\n    }\n    fullScreen() {\n        let data = \"fullsize\";\n        // get config by accessing sessions storage\n        let storage = sessionStorage.getItem(data);\n        if (storage) {\n            var options = JSON.parse(storage);\n            let url = new URL(window.location.href);\n            let urlParam = new URLSearchParams(url.search);\n            let id = this.getAttribute(\"id\");\n            // variant is found by comparing variant config opt with custom element attr opt\n            try {\n                var variant_check = options.variants.find((v) => v.opt === id);\n            }\n            catch (err) {\n                console.log(\"No option parameters found. Creating default parameters to continue.\");\n            }\n            var variant = paramCheck(variant_check, { opt: id });\n            // check for option param or return default value\n            var active = paramCheck(options.active_class, \"active\");\n            var hide = paramCheck(variant.hide, \"hide-container\");\n            var hidden = paramCheck(variant.to_hide, \"fade\");\n            var svg_show = `\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-fullscreen\" viewBox=\"0 0 16 16\">\n                    <path d=\"M1.5 1a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4A1.5 1.5 0 0 1 1.5 0h4a.5.5 0 0 1 0 1h-4zM10 .5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 16 1.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zM.5 10a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 0 14.5v-4a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v4a1.5 1.5 0 0 1-1.5 1.5h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5z\"/>\n                </svg>\n            `;\n            var svg_hide = `\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-fullscreen-exit\" viewBox=\"0 0 16 16\">\n                    <path d=\"M5.5 0a.5.5 0 0 1 .5.5v4A1.5 1.5 0 0 1 4.5 6h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5zm5 0a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 10 4.5v-4a.5.5 0 0 1 .5-.5zM0 10.5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 6 11.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zm10 1a1.5 1.5 0 0 1 1.5-1.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4z\"/>\n                </svg>\n            `;\n            var urlparam = paramCheck(variant.urlparam, \"fullscreen\");\n            if (urlParam.get(urlparam) == \"off\" || urlParam.get(urlparam) == null) {\n                urlParam.set(urlparam, \"on\");\n                document.querySelectorAll(`.${hide}`).forEach((el) => {\n                    el.classList.add(hidden);\n                });\n                this.innerHTML = svg_hide;\n                this.classList.remove(active);\n            }\n            else {\n                urlParam.delete(urlparam);\n                document.querySelectorAll(`.${hide}`).forEach((el) => {\n                    el.classList.remove(hidden);\n                });\n                this.innerHTML = svg_show;\n                this.classList.add(active);\n            }\n            var stateName = paramCheck(variant.opt, \"edition-fullscreen\");\n            var stateParam = urlParam.get(urlparam);\n            var state = {\n                [stateName]: stateParam,\n            };\n            var citation_url_str = paramCheck(variant.chg_citation, \"citation-url\");\n            var citation_url = document.getElementById(citation_url_str);\n            let href = `?${urlParam}${location.hash}`;\n            uptState({\n                hist: false,\n                cit: citation_url,\n                state: state,\n                href: href,\n            });\n        }\n    }\n    render() {\n        let data = \"fullsize\";\n        var options = JSON.parse(sessionStorage.getItem(data));\n        let opt = this.getAttribute(\"opt\");\n        try {\n            var variant_check = options.variants.find((v) => v.opt === opt);\n        }\n        catch (err) {\n            console.log(\"No option parameters found. Creating default parameters to continue.\");\n        }\n        var variant = paramCheck(variant_check, { opt: opt });\n        var a_class = paramCheck(options.active_class, \"nav-link btn btn-round\");\n        var svg = paramCheck(options.render_svg, \"<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='currentColor' class='bi bi-fullscreen' viewBox='0 0 16 16'><path d='M1.5 1a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4A1.5 1.5 0 0 1 1.5 0h4a.5.5 0 0 1 0 1h-4zM10 .5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 16 1.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zM.5 10a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 0 14.5v-4a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v4a1.5 1.5 0 0 1-1.5 1.5h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5z'/></svg>\");\n        var opt_title = paramCheck(variant.title, \"Full screen on/off\");\n        var var_opt = paramCheck(variant.opt, \"edition-fullscreen\");\n        this.innerHTML = `\n            <small><label style=\"padding:.2em;\">${opt_title}:</label></small>\n            <a title=\"${opt_title}\"\n                style=\"cursor:pointer;\"\n                class=\"${a_class} active\"\n                id=\"${var_opt}\"\n                data-target=\"${data}\">\n                ${svg}\n            </a>\n        `;\n    }\n    attributeChangedCallback() {\n        this.render();\n    }\n    disconnectedCallback() {\n        this.childNodes[3].removeEventListener(\"click\", this.fullScreen);\n    }\n}\n","const { uptState, paramCheck } = require(\"../../utils/utils\");\nexport class FontSize extends HTMLElement {\n    static get observedAttributes() {\n        return [\"opt\"];\n    }\n    connectedCallback() {\n        this.render();\n        // console.log(this.childNodes[3]);\n        this.childNodes[3].addEventListener(\"change\", this.fontSize);\n    }\n    fontSize() {\n        let data = \"fontsize\";\n        let storage = sessionStorage.getItem(data);\n        if (storage) {\n            var options = JSON.parse(storage);\n            let url = new URL(window.location.href);\n            let urlParam = new URLSearchParams(url.search);\n            let id = this.getAttribute(\"id\");\n            // variant is found by comparing variant config opt with custom element attr opt\n            try {\n                var variant_check = options.variants.find((v) => v.opt === id);\n            }\n            catch (err) {\n                console.log(\"No option parameters found. Creating default parameters to continue.\");\n            }\n            var variant = paramCheck(variant_check, { opt: id });\n            let p_change = paramCheck(variant.paragraph, \"p\");\n            let p_class = paramCheck(variant.p_class, \"yes-index\");\n            try {\n                var size_check = variant.sizes;\n            }\n            catch (err) {\n                console.log(\"Sizes obj not found. Creating default parameters.\");\n            }\n            let size = paramCheck(size_check, {\n                default: \"default\",\n                font_size_14: \"14\",\n                font_size_18: \"18\",\n                font_size_22: \"22\",\n                font_size_26: \"26\",\n            });\n            let urlparam = paramCheck(variant.urlparam, \"fontsize\");\n            var value = document.getElementById(id).value;\n            var css_class = paramCheck(variant.css_class, \"font-size-\");\n            if (urlParam.get(urlparam) !== value.replace(css_class, \"\")) {\n                urlParam.set(urlparam, value.replace(css_class, \"\"));\n                let paragraph = document.querySelectorAll(`${p_change}.${p_class}`);\n                paragraph.forEach((el) => {\n                    for (let s in size) {\n                        if (size[s] !== \"default\") {\n                            el.classList.remove(css_class + size[s]);\n                        }\n                    }\n                    if (value !== \"default\") {\n                        el.classList.add(value);\n                    }\n                });\n            }\n            var stateName = variant.opt;\n            paramCheck(variant.opt, \"select-fontsize\");\n            var stateParam = urlParam.get(urlparam);\n            var state = {\n                [stateName]: stateParam,\n            };\n            // window.history.pushState(state, '', `${location.pathname}?${urlParam}${location.hash}`);\n            var citation_url_str = paramCheck(variant.chg_citation, \"citation-url\");\n            var citation_url = document.getElementById(citation_url_str);\n            let href = `?${urlParam}${location.hash}`;\n            uptState({\n                hist: false,\n                cit: citation_url,\n                state: state,\n                href: href,\n            });\n        }\n    }\n    render() {\n        let data = \"fontsize\";\n        let storage = sessionStorage.getItem(data);\n        var options = JSON.parse(storage);\n        let opt = this.getAttribute(\"opt\");\n        try {\n            var variant_check = options.variants.find((v) => v.opt === opt);\n        }\n        catch (err) {\n            console.log(\"No option parameters found. Creating default parameters to continue.\");\n        }\n        var variant = paramCheck(variant_check, { opt: opt });\n        try {\n            var size_check = variant.sizes;\n        }\n        catch (err) {\n            console.log(\"Sizes obj not found. Creating default parameters.\");\n        }\n        let size = paramCheck(size_check, {\n            default: \"default\",\n            font_size_14: \"14\",\n            font_size_18: \"18\",\n            font_size_22: \"22\",\n            font_size_26: \"26\",\n        });\n        var html_class = paramCheck(options.html_class, \"custom-select\");\n        var css_class = paramCheck(variant.css_class, \"font-size-\");\n        var var_title = paramCheck(variant.title, \"Font size\");\n        let s_html = `\n            <small><label style=\"padding:.2em;\">${var_title}:</label></small>\n            <select id=\"${opt}\" data-target=\"${data}\" class=\"${html_class}\">\n        `;\n        for (let s in size) {\n            if (size[s] == \"default\") {\n                var option = `<option value=\"default\" selected='selected'>${size[s]\n                    .split(\"-\")\n                    .slice(-1)} px`;\n            }\n            else {\n                var option = `<option value='${css_class}${size[s]}'>${size[s]\n                    .split(\"-\")\n                    .slice(-1)} px`;\n            }\n            s_html += option;\n            s_html += \"</option>\";\n        }\n        s_html += \"</select>\";\n        this.innerHTML = s_html;\n    }\n    attributeChangedCallback() {\n        this.render();\n    }\n    disconnectedCallback() {\n        this.childNodes[3].removeEventListener(\"change\", this.fontSize);\n    }\n}\n","const { uptState, paramCheck } = require(\"../../utils/utils\");\nexport class FontFamily extends HTMLElement {\n    static get observedAttributes() {\n        return [\"opt\"];\n    }\n    connectedCallback() {\n        this.render();\n        // console.log(this.childNodes[3]);\n        this.childNodes[3].addEventListener(\"change\", this.fontFamily);\n    }\n    fontFamily() {\n        let data = \"font_family\";\n        let storage = sessionStorage.getItem(data);\n        if (storage) {\n            let options = JSON.parse(storage);\n            let url = new URL(window.location.href);\n            let urlParam = new URLSearchParams(url.search);\n            let id = this.getAttribute(\"id\");\n            // variant is found by comparing variant config opt with custom element attr opt\n            try {\n                var variant_check = options.variants.find((v) => v.opt === id);\n            }\n            catch (err) {\n                console.log(\"No option parameters found. Creating default parameters to continue.\");\n            }\n            var variant = paramCheck(variant_check, { opt: id });\n            // get citation url key and HTMLElement\n            var citation_url_str = paramCheck(variant.chg_citation, \"citation-url\");\n            var citation_url = document.getElementById(citation_url_str);\n            // get urlparam key\n            var urlparam = paramCheck(variant.urlparam, \"font\");\n            // define paragraph HTML element name\n            let p_change = paramCheck(variant.paragraph, \"p\");\n            // define class to change font sizes (not all paragraphs might need to be changed)\n            let p_class = paramCheck(variant.p_class, \"yes-index\");\n            // check if sizes object with font sizes is not null or undefined\n            try {\n                var family_check = variant.fonts;\n            }\n            catch (err) {\n                console.log(\"Font family object not found. Creating default parameters.\");\n            }\n            let family = paramCheck(family_check, {\n                default: \"default\",\n                font1: \"Times-New-Roman\",\n                font2: \"Courier-New\",\n                font3: \"Arial-serif\",\n            });\n            // change select option value based on provided url param\n            var select = document.getElementById(variant.opt);\n            var value = select.value;\n            if (urlParam.get(urlparam) !== value) {\n                urlParam.set(urlparam, value);\n                let paragraph = document.querySelectorAll(`${p_change}.${p_class}`);\n                paragraph.forEach((el) => {\n                    for (let s in family) {\n                        if (family[s] !== \"default\") {\n                            el.classList.remove(family[s].toLowerCase());\n                        }\n                    }\n                    if (value !== \"default\") {\n                        el.classList.add(value.toLowerCase());\n                    }\n                });\n            }\n            var stateName = variant.opt;\n            var stateParam = urlParam.get(urlparam);\n            var state = {\n                [stateName]: stateParam,\n            };\n            let href = `?${urlParam}${location.hash}`;\n            uptState({\n                hist: false,\n                cit: citation_url,\n                state: state,\n                href: href,\n            });\n        }\n    }\n    render() {\n        let data = \"font_family\";\n        let storage = sessionStorage.getItem(data);\n        let options = JSON.parse(storage);\n        let opt = this.getAttribute(\"opt\");\n        // check if user set opt attribute\n        if (typeof opt !== \"string\") {\n            console.log(\"No 'opt' attribute in custom element font-family found!\");\n        }\n        // variant is found by comparing variant config opt with custom element attr opt\n        try {\n            var variant_check = options.variants.find((v) => v.opt === opt);\n        }\n        catch (err) {\n            console.log(\"No option parameters found. Creating default parameters to continue.\");\n        }\n        var variant = paramCheck(variant_check, [{ opt: opt }]);\n        // check if sizes object with font sizes is not null or undefined\n        try {\n            var family_check = variant.fonts;\n        }\n        catch (err) {\n            console.log(\"Font family object not found. Creating default parameters.\");\n        }\n        let family = paramCheck(family_check, {\n            default: \"default\",\n            font1: \"Times-New-Roman\",\n            font2: \"Courier-New\",\n            font3: \"Arial-serif\",\n        });\n        let html_class = paramCheck(options.html_class, \"custom-select\");\n        let css_class = paramCheck(variant.css_class, \"\");\n        let opt_title = paramCheck(variant.title, \"Font Family\");\n        let s_html = `\n            <small><label style=\"padding:.2em;\">${opt_title}:</label></small>\n            <select id=\"${opt}\" data-target=\"${data}\" class=\"${html_class}\">\n        `;\n        for (let s in family) {\n            if (family[s] == \"default\") {\n                var option = `<option value=\"default\" selected='selected'>${family[s].replace(\"-\", \" \")}`;\n            }\n            else {\n                var option = `<option value='${css_class}${family[s]}'>${family[s].replace(\"-\", \" \")}`;\n            }\n            s_html += option;\n            s_html += \"</option>\";\n        }\n        s_html += \"</select>\";\n        this.innerHTML = s_html;\n    }\n    attributeChangedCallback() {\n        this.render();\n    }\n    disconnectedCallback() {\n        this.childNodes[2].removeEventListener(\"change\", this.fontFamily);\n    }\n}\n","const { uptState, paramCheck, hideLoading } = require(\"../../utils/utils\");\nconst OpenSeadragon = require(\"openseadragon\");\nexport class ImageSwitch extends HTMLElement {\n    static get observedAttributes() {\n        return [\"opt\"];\n    }\n    connectedCallback() {\n        this.render();\n        // console.log(this.childNodes[3]);\n        this.childNodes[3].addEventListener(\"click\", this.viewerSwitch);\n    }\n    viewerSwitch() {\n        let data = \"image_switch\";\n        let id = this.getAttribute(\"id\");\n        // check if user set opt attribute\n        if (typeof id !== \"string\") {\n            console.log(\"No 'opt' attribute in custom element font-family found!\");\n        }\n        let storage = sessionStorage.getItem(data);\n        if (storage) {\n            let options = JSON.parse(storage);\n            if (!options) {\n                alert(\"Please turn on cookies to display content!\");\n            }\n            let url = new URL(location.href);\n            let urlParam = new URLSearchParams(url.search);\n            // variant is found by comparing variant config opt with custom element attr opt\n            try {\n                var variant_check = options.variants.find((v) => v.opt === id);\n            }\n            catch (err) {\n                console.log(\"No option parameters found. Creating default parameters to continue.\");\n            }\n            var variant = paramCheck(variant_check, { opt: id });\n            // check for option param or return default value\n            var active = paramCheck(options.active_class, \"active\");\n            // check if sizes object with font sizes is not null or undefined\n            try {\n                var hide_check = variant.hide;\n            }\n            catch (err) {\n                console.log(\"Hide object not found. Creating default parameters.\");\n            }\n            let hide_checked = paramCheck(hide_check, {\n                hidden: true,\n                class_to_hide: \"hide-container1\",\n                class_to_show: \"show-container1\",\n                class_parent: \"hide-show-wrapper\",\n                resize: \"resize-hide\",\n            });\n            // get classes from params for container to hide and show\n            let hidden = paramCheck(hide_checked.hidden, true);\n            let hide = paramCheck(hide_checked.class_to_hide, \"hide-container1\");\n            let show = paramCheck(hide_checked.class_to_show, \"show-container1\");\n            let resize = paramCheck(hide_checked.resize, \"resize-hide\");\n            // get class for wrapper of hide show container\n            let parent = paramCheck(hide_checked.class_parent, \"hide-show-wrapper\");\n            // get urlparam key\n            var urlparam = paramCheck(variant.urlparam, \"image\");\n            // get fade class\n            let fade = paramCheck(variant.fade, \"fade\");\n            // check if sizes object with font sizes is not null or undefined\n            try {\n                var small_check = variant.column_small;\n            }\n            catch (err) {\n                console.log(\"Hide object not found. Creating default parameters.\");\n            }\n            let column_small_check = paramCheck(small_check, {\n                class: \"col-md-6\",\n                percent: \"50\",\n            });\n            // check if sizes object with font sizes is not null or undefined\n            try {\n                var large_check = variant.column_full;\n            }\n            catch (err) {\n                console.log(\"Hide object not found. Creating default parameters.\");\n            }\n            let column_full_checked = paramCheck(large_check, {\n                class: \"col-md-12\",\n                percent: \"100\",\n            });\n            // get classes and style for hide show container resizing\n            let column_small = [\n                paramCheck(column_small_check.class, \"col-md-6\"),\n                paramCheck(column_small_check.percent, \"50\"),\n            ];\n            let column_full = [\n                paramCheck(column_full_checked.class, \"col-md-12\"),\n                paramCheck(column_full_checked.percent, \"100\"),\n            ];\n            if (urlParam.get(urlparam) == \"on\") {\n                urlParam.set(urlparam, \"off\");\n                document.querySelectorAll(`.${hide}`).forEach((el) => {\n                    el.classList.add(fade);\n                    el.classList.remove(column_small[0]);\n                    el.style.maxWidth = `${column_full[1]}%`;\n                    el.classList.remove(active);\n                });\n                document.querySelectorAll(`.${show}`).forEach((el) => {\n                    el.classList.remove(column_small[0]);\n                    el.classList.add(column_full[0]);\n                    el.style.maxWidth = `${column_full[1]}%`;\n                    el.classList.remove(active);\n                });\n                document.querySelectorAll(`.${resize}`).forEach((el) => {\n                    el.classList.add(fade);\n                });\n                this.classList.remove(active);\n            }\n            else {\n                urlParam.set(urlparam, \"on\");\n                document.querySelectorAll(`.${hide}`).forEach((el) => {\n                    el.classList.remove(fade);\n                    el.classList.add(column_small[0]);\n                    el.style.maxWidth = `${column_small[1]}%`;\n                    el.classList.add(active);\n                });\n                document.querySelectorAll(`.${show}`).forEach((el) => {\n                    el.classList.add(column_small[0]);\n                    el.classList.remove(column_full[0]);\n                    el.style.maxWidth = `${parseInt(column_full[1]) - parseInt(column_small[1])}%`;\n                    el.classList.add(active);\n                });\n                document.querySelectorAll(`.${resize}`).forEach((el) => {\n                    el.classList.remove(fade);\n                });\n                /* test if openseadragon is already loaded */\n                var osd_test = document.getElementsByClassName(\"openseadragon-container\")[0];\n                if (!osd_test) {\n                    /* initialize OpenSeardragon and get container and image url */\n                    /* get image-loader custom element */\n                    var image_loader = document.querySelectorAll(\"image-loader\");\n                    var image_loader_type = image_loader[0].getAttribute(\"data-type\");\n                    var image_loader_pos = image_loader[0].getAttribute(\"pos\");\n                    var image = document.getElementById(`${image_loader_type}_img_${image_loader_pos}`);\n                    /* get container to load osd in */\n                    var _osd_container_id = `${image_loader_type}_container_${image_loader_pos}`;\n                    var osd_container = document.getElementById(_osd_container_id);\n                    /* get container with image-viewer element to be removed afer osd was loaded */\n                    var osd_container_2 = document.getElementById(`${image_loader_type}_container2_${image_loader_pos}`);\n                    /* get text container to set proper container height for osd viewer */\n                    var text_container_height = document.getElementById(`text-resize-${image_loader_pos}`).offsetHeight;\n                    /* get img container to set proper container width for osd viewer */\n                    var image_container_width = document.getElementById(`img-resize-${image_loader_pos}`).offsetWidth;\n                    /* set osd container width and height */\n                    osd_container.style.height = `${text_container_height}px`;\n                    osd_container.style.width = `${image_container_width - 25}px`;\n                    /* get image url of iiif server */\n                    let image_src = image.getAttribute(\"data-src\");\n                    let image_url = { type: \"image\", url: image_src };\n                    /* initialize OpenSeadragon viewer */\n                    let viewer = OpenSeadragon({\n                        id: _osd_container_id,\n                        prefixUrl: \"https://cdnjs.cloudflare.com/ajax/libs/openseadragon/4.0.0/images/\",\n                        tileSources: image_url,\n                        // Initial rotation angle\n                        // degrees: 90,\n                        // Show rotation buttons\n                        showRotationControl: true,\n                        // Enable touch rotation on tactile devices\n                        gestureSettingsTouch: {\n                            pinchRotate: true,\n                        },\n                    });\n                    // hides static images\n                    osd_container_2.remove();\n                    // hide loading spinner if image fully loaded status changes\n                    // see issue: https://github.com/openseadragon/openseadragon/issues/1262\n                    viewer.addHandler(\"open\", function () {\n                        let tiledImage = viewer.world.getItemAt(0);\n                        if (tiledImage.getFullyLoaded()) {\n                            hideLoading(_osd_container_id);\n                        }\n                        else {\n                            tiledImage.addOnceHandler(\"fully-loaded-change\", function () {\n                                let spinnerID2 = \"spinner_\" + _osd_container_id;\n                                if (document.getElementById(spinnerID2)) {\n                                    document.getElementById(spinnerID2).remove();\n                                }\n                            });\n                        }\n                    });\n                }\n                else {\n                    /* works only with one image viewer */\n                    try {\n                        var viewer_loaded = document.querySelector(`.${parent}.${active} .${hide}`);\n                    }\n                    catch (err) {\n                        console.log(`HTML class elements .${parent}.${active} .${hide} not found. Please make sure your HTML site contains them.`);\n                    }\n                    try {\n                        var facs = viewer_loaded.querySelectorAll(\"*\")[0];\n                        var facsContainer = facs.childNodes[0];\n                        // set style height and width\n                        // get iamge_size from params\n                        // let image_size = paramCheck(variant.image_size, \"500px\");\n                        facs.style.width = `${viewer_loaded.offsetWidth}px`;\n                        facs.style.height = `${viewer_loaded.offsetHeight}px`;\n                        facsContainer.style.width = `${viewer_loaded.offsetWidth - 25}px`;\n                        facsContainer.style.height = `${viewer_loaded.offsetHeight}px`;\n                    }\n                    catch (err) {\n                        console.log(`HTML class elements .${parent}.${active} .${hide} not found. Please make sure your HTML site contains them.`);\n                    }\n                }\n                this.classList.add(active);\n            }\n            var stateName = variant.opt;\n            var stateParam = urlParam.get(variant.opt);\n            var state = {\n                [stateName]: stateParam,\n            };\n            // get citation url class and update citation\n            let citation_url_str = paramCheck(variant.chg_citation, \"citation-url\");\n            let citation_url = document.getElementById(citation_url_str);\n            let href = `?${urlParam}${location.hash}`;\n            uptState({\n                hist: false,\n                cit: citation_url,\n                state: state,\n                href: href,\n            });\n        }\n    }\n    render() {\n        let data = \"image_switch\";\n        let storage = sessionStorage.getItem(data);\n        let options = JSON.parse(storage);\n        let opt = this.getAttribute(\"opt\");\n        // check if user set opt attribute\n        if (typeof opt !== \"string\") {\n            console.log(\"No 'opt' attribute in custom element font-family found!\");\n        }\n        // variant is found by comparing variant config opt with custom element attr opt\n        try {\n            var variant_check = options.variants.find((v) => v.opt === opt);\n        }\n        catch (err) {\n            console.log(\"No option parameters found. Creating default parameters to continue.\");\n        }\n        var variant = paramCheck(variant_check, { opt: opt });\n        // check if sizes object with font sizes is not null or undefined\n        try {\n            var render_check = options.rendered_element;\n        }\n        catch (err) {\n            console.log(\"Sizes obj not found. Creating default parameters.\");\n        }\n        let rendered_element = paramCheck(render_check, {\n            a_class: \"nav-link btn btn-round\",\n            svg: \"<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='currentColor' class='bi bi-image' viewBox='0 0 16 16'><path d='M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z'/><path d='M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1h12z'/></svg>\",\n        });\n        let active = paramCheck(options.active_class, \"active\");\n        let var_title = paramCheck(variant.title, \"Facsimile on/off\");\n        this.innerHTML = `\n            <small><label style=\"padding:.2em;\">${var_title}:</label></small>\n            <a title=\"${var_title}\"\n                class=\"${rendered_element.a_class} ${active}\"\n                id=\"${variant.opt}\"\n                data-target=\"${data}\">\n                ${rendered_element.svg}\n            </a>\n        `;\n    }\n    attributeChangedCallback() {\n        this.render();\n    }\n    disconnectedCallback() {\n        this.childNodes[3].removeEventListener(\"click\", this.viewerSwitch);\n    }\n}\n","const { paramCheck } = require(\"../../utils/utils\");\nexport class ImageLoader extends HTMLElement {\n    static get observedAttributes() {\n        return [\"opt\", \"data-type\", \"data-source\", \"pos\"];\n    }\n    connectedCallback() {\n        this.render();\n    }\n    render() {\n        let data = \"image_loader\";\n        let storage = sessionStorage.getItem(data);\n        // get session storage (not all variables are required)\n        let options = JSON.parse(storage);\n        // define url and param to access images\n        let url = paramCheck(options.url, \"provide-url\");\n        let url_param = paramCheck(options.url_param, \"provide-url-params (optional)\");\n        let pos = this.getAttribute(\"pos\");\n        // check if user set opt attribute\n        if (typeof pos !== \"string\") {\n            console.log(\"No 'opt' attribute in custom element font-family found!\");\n        }\n        let data_type = this.getAttribute(\"data-type\");\n        // check if user set opt attribute\n        if (typeof data_type !== \"string\") {\n            console.log(\"No 'opt' attribute in custom element font-family found!\");\n        }\n        let dataSource = this.getAttribute(\"data-source\");\n        // check if user set opt attribute\n        if (typeof dataSource !== \"string\") {\n            console.log(\"No 'opt' attribute in custom element font-family found!\");\n        }\n        this.innerHTML = `\n            <span id=\"${data_type}_img_${pos}\" data-src=\"${url}${dataSource}${url_param}\">Enable JavaScript to load image!</span>\n        `;\n    }\n}\n","const OpenSeadragon = require(\"openseadragon\");\nconst { uptState, paramCheck } = require(\"../../utils/utils\");\nconst config = [];\nexport class EditionPagination extends HTMLElement {\n    static get observedAttributes() {\n        return [\"opt\", \"pos\", \"facs\", \"data-type\"];\n    }\n    connectedCallback() {\n        this.render();\n        this.childNodes[1].addEventListener(\"click\", this.updateImgPage);\n    }\n    updateImgPage() {\n        let data = \"ed_pagination\";\n        let storage = sessionStorage.getItem(data);\n        if (storage) {\n            let options = JSON.parse(storage);\n            // get urlparam\n            let url = new URL(window.location.href);\n            let urlParam = new URLSearchParams(url.search);\n            // get selected href\n            var href = this.getAttribute(\"href\");\n            // check if user set opt attribute\n            if (typeof href !== \"string\") {\n                console.log(\"No 'href' attribute in custom element pagination found!\");\n            }\n            var dataTab = this.getAttribute(\"data-tab\");\n            // check if user set opt attribute\n            if (typeof href !== \"string\") {\n                console.log(\"No 'data-tab' attribute in custom element pagination found!\");\n            }\n            // update urlparam\n            let urlparam = paramCheck(options.urlparam, \"page\");\n            urlParam.set(urlparam, href.replace(/[^0-9]+/, \"\"));\n            var state = {\n                [urlparam]: href.replace(/[^0-9]+/, \"\"),\n            };\n            // get citation url class and update citation\n            let citation_url_str = paramCheck(options.chg_citation, \"citation-url\");\n            let citation_url = document.getElementById(citation_url_str);\n            let hrefState = `?${urlParam}${location.hash}`;\n            uptState({\n                hist: false,\n                cit: citation_url,\n                state: state,\n                href: hrefState,\n            });\n            // set all nav links to inactive\n            let pag_link = paramCheck(options.pag_link, \".pagination-link\");\n            let link = document.querySelectorAll(`${pag_link}`);\n            let active = paramCheck(options.active_class, \"active\");\n            let bootstrap_class = paramCheck(options.bootstrap_class, \"show\");\n            let pag_tab = paramCheck(options.pag_tab, \".pagination-tab.tab-pane\");\n            link.forEach(function (el) {\n                el.classList.remove(active);\n                el.classList.remove(bootstrap_class);\n            });\n            // get all nav tabs matching the href and set to active\n            var ref = document.querySelectorAll(`${pag_link}[href=\"${href}\"]`);\n            ref.forEach(function (el) {\n                el.classList.add(active);\n            });\n            // active tab\n            var tab = document.querySelectorAll(`${pag_tab}[data-tab=\"${dataTab}\"]`);\n            tab.forEach(function (el) {\n                el.classList.remove(active);\n            });\n            // get pagination tab with selected link\n            var tab_ref = document.querySelectorAll(`${pag_tab}${href}`);\n            tab_ref.forEach(function (el) {\n                el.classList.add(active);\n                el.classList.add(bootstrap_class);\n            });\n            // ###############\n            // load OSD Viewer\n            // ###############\n            let id = this.getAttribute(\"id\");\n            // variant is found by comparing variant config opt with custom element attr opt\n            try {\n                var variant_check = config.find((v) => v.opt === id);\n            }\n            catch (err) {\n                console.log(\"No option parameters found. Creating default parameters to continue.\");\n            }\n            var variant = paramCheck(variant_check, { opt: id });\n            let opt_url = paramCheck(options.url, \"provide-url\");\n            let opt_urlparam = paramCheck(options.url_param, \"\");\n            let opt_osd_target = paramCheck(options.osd_target, \"container\");\n            let opt_img_source = paramCheck(options.img_source, \"container2\");\n            let opt_image_size = paramCheck(options.img_size, \"500px\");\n            let dataSource = `${opt_url}${variant.dataSource}${opt_urlparam}`;\n            let targetID0 = `${variant.dataType}_${opt_osd_target}_${variant.pos}`;\n            let targetID1 = `${variant.dataType}_${opt_img_source}_${variant.pos}`;\n            // remove static images\n            if (document.getElementById(targetID1)) {\n                document.getElementById(targetID1).remove();\n            }\n            let target = document.getElementById(targetID0);\n            if (target.childNodes.length === 0) {\n                target.style.height = opt_image_size;\n                // OpenSeaDragon Image Viewer\n                let imageURL = { type: \"image\", url: dataSource };\n                let viewer = OpenSeadragon({\n                    id: targetID0,\n                    prefixUrl: \"https://cdnjs.cloudflare.com/ajax/libs/openseadragon/3.1.0/images/\",\n                    tileSources: imageURL,\n                    // Initial rotation angle\n                    // degrees: 90,\n                    // Show rotation buttons\n                    showRotationControl: true,\n                    // Enable touch rotation on tactile devices\n                    gestureSettingsTouch: {\n                        pinchRotate: true,\n                    },\n                });\n                // hide loading spinner if image fully loaded status changes\n                // see issue: https://github.com/openseadragon/openseadragon/issues/1262\n                viewer.addHandler(\"open\", function () {\n                    let tiledImage = viewer.world.getItemAt(0);\n                    if (tiledImage.getFullyLoaded()) {\n                        hideLoading();\n                    }\n                    else {\n                        tiledImage.addOnceHandler(\"fully-loaded-change\", hideLoading);\n                    }\n                });\n                function hideLoading() {\n                    // var container = $(osd_container_id).attr(\"id\");\n                    let spinnerID = \"spinner_\" + targetID0;\n                    if (document.getElementById(spinnerID)) {\n                        // console.log(spinnerID);\n                        document.getElementById(spinnerID).remove();\n                    }\n                }\n            }\n        }\n    }\n    render() {\n        let data_type = this.getAttribute(\"data-type\");\n        // check if user set opt attribute\n        if (typeof data_type !== \"string\") {\n            console.log(\"No 'data-type' attribute in custom element pagination found!\");\n        }\n        let pos = this.getAttribute(\"pos\");\n        // check if user set opt attribute\n        if (typeof pos !== \"string\") {\n            console.log(\"No 'pos' attribute in custom element pagination found!\");\n        }\n        let facs = this.getAttribute(\"facs\");\n        // check if user set opt attribute\n        if (typeof facs !== \"string\") {\n            console.log(\"No 'facs' attribute in custom element pagination found!\");\n        }\n        config.push({\n            opt: `${data_type}_link_${pos}`,\n            dataType: data_type,\n            dataSource: facs,\n            pos: pos,\n        });\n        this.innerHTML = `\n            <a title=\"Tab ${pos}\"\n                class=\"nav-link pagination-link active\"\n                data-toggle=\"tab\"\n                data-tab=\"paginate\"\n                id=\"${data_type}_link_${pos}\"\n                href=\"#paginate-${pos}\"\n                style=\"border-radius:30px;\">\n                ${pos}\n            </a>\n        `;\n    }\n}\n","const config = [];\nexport class WindowResize extends HTMLElement {\n    static get observedAttributes() {\n        return [\"opt\", \"pos\"];\n    }\n    connectedCallback() {\n        this.render();\n        this.childNodes[1].childNodes[1].addEventListener(\"mousedown\", this.resize);\n    }\n    resize() {\n        var isResizing = true;\n        let id = this.getAttribute(\"id\");\n        let variant = config.find((v) => `${v.opt}-${v.pos}` === id);\n        let container = document.getElementById(`container-resize-${variant.pos}`);\n        let left_container = document.getElementById(`text-resize-${variant.pos}`);\n        let right_container = document.getElementById(`img-resize-${variant.pos}`);\n        let handle = document.getElementById(`${variant.opt}-${variant.pos}`);\n        let viewer_wrapper = document.getElementById(`viewer-${variant.pos}`);\n        let viewer = viewer_wrapper.childNodes[0];\n        let text = left_container.childNodes[0];\n        /* reset width height */\n        viewer_wrapper.style.width = null;\n        viewer_wrapper.style.height = null;\n        document.addEventListener(\"mousemove\", function (e) {\n            // we don't want to do anything if we aren't resizing.\n            if (!isResizing)\n                return;\n            let value = handle.value;\n            let offsetLeft = container.offsetWidth - e.clientX;\n            let offsetRight = container.offsetWidth - parseInt(value);\n            let w = window.innerWidth;\n            if (parseInt(value) < w * parseFloat(variant.size) - 10) {\n                left_container.style.maxWidth = `${container.offsetWidth - offsetLeft}px`;\n                right_container.style.maxWidth = `${offsetLeft}px`;\n                viewer.style.width = `${offsetLeft}px`;\n                viewer.style.height = `${offsetLeft}px`;\n            }\n            else if (parseInt(value) > w * parseFloat(variant.size) + 10) {\n                left_container.style.maxWidth = `${value}px`;\n                text.style.width = `${value}px`;\n                right_container.style.maxWidth = `${offsetRight}px`;\n                viewer.style.width = `${offsetRight}px`;\n                viewer.style.height = `${offsetRight}px`;\n            }\n            else if (parseInt(value) === w * parseFloat(variant.size) + 9 ||\n                parseInt(value) === w * parseFloat(variant.size) - 9) {\n                left_container.style.maxWidth = `${parseFloat(variant.size) * 100}%`;\n                text.style.width = `${parseFloat(variant.size) * 100}%`;\n                right_container.style.maxWidth = `${(1 - parseFloat(variant.size)) * 100}%`;\n                viewer.style.width = `${right_container.offsetWidth}px`;\n                viewer.style.height = `${right_container.offsetHeight}px`;\n            }\n        });\n        document.addEventListener(\"mouseup\", function () {\n            // stop resizing\n            isResizing = false;\n        });\n    }\n    render() {\n        let w = window.innerWidth;\n        let opt = this.getAttribute(\"opt\");\n        // check if user set opt attribute\n        if (typeof opt !== \"string\") {\n            console.log(\"No 'opt' attribute in custom element window-resize found!\");\n        }\n        let pos = this.getAttribute(\"pos\");\n        // check if user set opt attribute\n        if (typeof pos !== \"string\") {\n            console.log(\"No 'pos' attribute in custom element window-resize found!\");\n        }\n        let size = this.getAttribute(\"size\");\n        // check if user set opt attribute\n        if (typeof size !== \"string\") {\n            console.log(\"No 'size' attribute in custom element window-resize found!\");\n        }\n        config.push({\n            opt: opt,\n            pos: pos,\n            size: size,\n        });\n        this.innerHTML = `\n            <div class=\"expand-wrapper text-center resize-hide\">\n                <input title=\"change size\" id=\"${opt}-${pos}\" type=\"range\" min=\"0\" max=\"${w}\" value=\"${w * parseFloat(size)}\" class=\"slider\"/>\n            </div>\n        `;\n    }\n}\n","const { addMarkup, removeMarkup, uptState, hideLoading, paramCheck, } = require(\"../../utils/utils\");\nexport class UrlSearchParamUpdate {\n    fullSreen() {\n        // get custom element and access opt attribute\n        let el = document.getElementsByTagName(\"full-size\");\n        let opt = el[0].getAttribute(\"opt\");\n        if (typeof opt !== \"string\") {\n            console.log(\"No 'opt' attribute in custom element font-size found!\");\n        }\n        // config name is predfined in index.ts\n        let data = \"fullsize\";\n        // get config by accessing sessions storage\n        let storage = sessionStorage.getItem(data);\n        if (storage) {\n            var options = JSON.parse(storage);\n            if (!options) {\n                alert(\"Please turn on cookies to display content!\");\n            }\n            // to manipulate url parameters construct url by getting current url\n            let url = new URL(location.href);\n            let urlParam = new URLSearchParams(url.search);\n            // variant is found by comparing variant config opt with custom element attr opt\n            try {\n                var variant_check = options.variants.find((v) => v.opt === opt);\n            }\n            catch (err) {\n                console.log(\"No option parameters found. Creating default parameters to continue.\");\n            }\n            var variant = paramCheck(variant_check, { opt: opt });\n            // if variant obj contains urlparam string check urlparams parameters\n            var urlparam = paramCheck(variant.urlparam, \"fullscreen\");\n            // check for option param or return default value\n            var active = paramCheck(options.active_class, \"active\");\n            var hide = paramCheck(variant.hide, \"hide-container\");\n            var hidden = paramCheck(variant.to_hide, \"fade\");\n            if (urlParam.get(urlparam) == null) {\n                urlParam.set(urlparam, \"off\");\n            }\n            if (![\"on\", \"off\"].includes(urlParam.get(urlparam))) {\n                console.log(`fullscreen=${urlParam.get(urlparam)} is not a selectable option.`);\n                urlParam.set(urlparam, \"off\");\n            }\n            if (urlParam.get(urlparam) == \"off\") {\n                document.querySelectorAll(`.${hide}`).forEach((el) => {\n                    el.classList.remove(hidden);\n                    let svg_show = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-fullscreen\" viewBox=\"0 0 16 16\">\n                                            <path d=\"M1.5 1a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4A1.5 1.5 0 0 1 1.5 0h4a.5.5 0 0 1 0 1h-4zM10 .5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 16 1.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zM.5 10a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 0 14.5v-4a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v4a1.5 1.5 0 0 1-1.5 1.5h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5z\"/>\n                                        </svg>\n                                    `;\n                    let btn = document.getElementById(opt);\n                    btn.innerHTML = svg_show;\n                    btn.classList.remove(active);\n                    /* if value is off it should not be part of the urlsearchparams */\n                    urlParam.delete(urlparam);\n                });\n            }\n            if (urlParam.get(urlparam) == \"on\") {\n                document.querySelectorAll(`.${hide}`).forEach((el) => {\n                    el.classList.add(hidden);\n                    let svg_hide = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-fullscreen-exit\" viewBox=\"0 0 16 16\">\n                                            <path d=\"M5.5 0a.5.5 0 0 1 .5.5v4A1.5 1.5 0 0 1 4.5 6h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5zm5 0a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 10 4.5v-4a.5.5 0 0 1 .5-.5zM0 10.5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 6 11.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zm10 1a1.5 1.5 0 0 1 1.5-1.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4z\"/>\n                                        </svg>\n                                    `;\n                    let btn = document.getElementById(opt);\n                    btn.innerHTML = svg_hide;\n                    btn.classList.add(active);\n                });\n            }\n            var citation_url_str = paramCheck(variant.chg_citation, \"citation-url\");\n            var citation_url = document.getElementById(citation_url_str);\n            let href = `?${urlParam}${location.hash}`;\n            uptState({\n                hist: true,\n                cit: citation_url,\n                state: false,\n                href: href,\n            });\n        }\n    }\n    fontSize() {\n        // get element to access opt attribute\n        // opt required to connect to specific custom element\n        let el = document.getElementsByTagName(\"font-size\");\n        var id = el[0].getAttribute(\"opt\");\n        // check if user set opt attribute\n        if (typeof id !== \"string\") {\n            console.log(\"No 'opt' attribute in custom element font-size found!\");\n        }\n        // string fontsize is variable to access session cookies\n        let data = \"fontsize\";\n        let storage = sessionStorage.getItem(data);\n        if (storage) {\n            // define options object and parse session cookie as json\n            var options = JSON.parse(storage);\n            if (!options) {\n                alert(\"Please turn on cookies to display content!\");\n            }\n            // get url and urlparams to manipulate and update\n            let url = new URL(location.href);\n            let urlParam = new URLSearchParams(url.search);\n            // variant is found by comparing variant config opt with custom element attr opt\n            try {\n                var variant_check = options.variants;\n            }\n            catch (err) {\n                console.log(\"No option parameters found. Creating default parameters to continue.\");\n            }\n            var variants = paramCheck(variant_check, [{ opt: id }]);\n            for (let v in variants) {\n                // get urlparam key\n                var urlparam = paramCheck(variants[v].urlparam, \"fontsize\");\n                // get citation url key and HTMLElement\n                var citation_url_str = paramCheck(variants[v].chg_citation, \"citation-url\");\n                var citation_url = document.getElementById(citation_url_str);\n                // define paragraph HTML element name\n                let p_change = paramCheck(variants[v].paragraph, \"p\");\n                // define class to change font sizes (not all paragraphs might need to be changed)\n                let p_class = paramCheck(variants[v].p_class, \"yes-index\");\n                // check if sizes object with font sizes is not null or undefined\n                try {\n                    var size_check = variants[v].sizes;\n                }\n                catch (err) {\n                    console.log(\"Sizes obj not found. Creating default parameters.\");\n                }\n                let size = paramCheck(size_check, {\n                    default: \"default\",\n                    font_size_14: \"14\",\n                    font_size_18: \"18\",\n                    font_size_22: \"22\",\n                    font_size_26: \"26\",\n                });\n                // define font size name before size\n                var css_class = paramCheck(variants[v].css_class, \"font-size-\");\n                // check for null value in url params\n                if (urlParam.get(urlparam) == null) {\n                    urlParam.set(urlparam, \"default\");\n                }\n                // check if provided urlparam value is selectable\n                if (!Object.values(size).includes(urlParam.get(urlparam))) {\n                    console.log(`${urlparam}=${urlParam.get(urlparam)} is not a selectable option.`);\n                    urlParam.set(urlparam, \"default\");\n                }\n                else {\n                    // if valid urlparam is found change font sizes of paragraphs\n                    let paragraph = document.querySelectorAll(`${p_change}.${p_class}`);\n                    var new_value = urlParam.get(urlparam) !== \"default\"\n                        ? css_class + urlParam.get(urlparam)\n                        : urlParam.get(urlparam);\n                    // change select option value based on provided url param\n                    var select = document.getElementById(variants[v].opt);\n                    select.value = new_value;\n                    // finally, changing selected paragraph font size\n                    paragraph.forEach((el) => {\n                        for (let s in size) {\n                            if (size[s] !== \"default\") {\n                                el.classList.remove(css_class + size[s]);\n                            }\n                        }\n                        if (new_value !== \"default\") {\n                            el.classList.add(new_value);\n                        }\n                    });\n                }\n            }\n            /* if value is off it should not be part of the urlsearchparams */\n            if (urlParam.get(urlparam) == \"default\") {\n                urlParam.delete(urlparam);\n            }\n            // change browser history state\n            let href = `?${urlParam}${location.hash}`;\n            uptState({\n                hist: true,\n                cit: citation_url,\n                state: false,\n                href: href,\n            });\n        }\n    }\n    fontFamily() {\n        let el = document.getElementsByTagName(\"font-family\");\n        let id = el[0].getAttribute(\"opt\");\n        // check if user set opt attribute\n        if (typeof id !== \"string\") {\n            console.log(\"No 'opt' attribute in custom element font-family found!\");\n        }\n        let data = \"font_family\";\n        let storage = sessionStorage.getItem(data);\n        if (storage) {\n            let options = JSON.parse(storage);\n            if (!options) {\n                alert(\"Please turn on cookies to display content!\");\n            }\n            let url = new URL(location.href);\n            let urlParam = new URLSearchParams(url.search);\n            // variant is found by comparing variant config opt with custom element attr opt\n            try {\n                var variant_check = options.variants;\n            }\n            catch (err) {\n                console.log(\"No option parameters found. Creating default parameters to continue.\");\n            }\n            var variants = paramCheck(variant_check, [{ opt: id }]);\n            for (let v in variants) {\n                // get urlparam key\n                var urlparam = paramCheck(variants[v].urlparam, \"font\");\n                // get citation url key and HTMLElement\n                var citation_url_str = paramCheck(variants[v].chg_citation, \"citation-url\");\n                var citation_url = document.getElementById(citation_url_str);\n                // define paragraph HTML element name\n                let p_change = paramCheck(variants[v].paragraph, \"p\");\n                // define class to change font sizes (not all paragraphs might need to be changed)\n                let p_class = paramCheck(variants[v].p_class, \"yes-index\");\n                // check if sizes object with font sizes is not null or undefined\n                try {\n                    var family_check = variants[v].fonts;\n                }\n                catch (err) {\n                    console.log(\"Font family object not found. Creating default parameters.\");\n                }\n                let family = paramCheck(family_check, {\n                    default: \"default\",\n                    font1: \"Times-New-Roman\",\n                    font2: \"Courier-New\",\n                    font3: \"Arial-serif\",\n                });\n                if (urlParam.get(urlparam) == null) {\n                    urlParam.set(urlparam, \"default\");\n                }\n                if (!Object.values(family).includes(urlParam.get(urlparam))) {\n                    console.log(`font=${urlParam.get(urlparam)} is not a selectable option.`);\n                    urlParam.set(urlparam, \"default\");\n                }\n                else {\n                    let paragraph = document.querySelectorAll(`${p_change}.${p_class}`);\n                    if (urlParam.get(urlparam) !== \"default\") {\n                        var new_value = urlParam.get(urlparam);\n                    }\n                    else {\n                        var new_value = urlParam.get(urlparam);\n                    }\n                    // change select option value based on provided url param\n                    var select = document.getElementById(variants[v].opt);\n                    select.value = new_value;\n                    // finally, change font-size of selected paragraphs\n                    paragraph.forEach((el) => {\n                        for (let f in family) {\n                            if (family[f] !== \"default\") {\n                                el.classList.remove(family[f].toLowerCase());\n                            }\n                        }\n                        if (new_value !== \"default\") {\n                            el.classList.add(new_value.toLowerCase());\n                        }\n                    });\n                }\n            }\n            /* if value is off it should not be part of the urlsearchparams */\n            if (urlParam.get(urlparam) == \"default\") {\n                urlParam.delete(urlparam);\n            }\n            // update browser history state\n            let href = `?${urlParam}${location.hash}`;\n            uptState({\n                hist: true,\n                cit: citation_url,\n                state: false,\n                href: href,\n            });\n        }\n    }\n    viewerSwitch() {\n        let el = document.getElementsByTagName(\"image-switch\");\n        let opt = el[0].getAttribute(\"opt\");\n        // check if user set opt attribute\n        if (typeof opt !== \"string\") {\n            console.log(\"No 'opt' attribute in custom element font-family found!\");\n        }\n        let data = \"image_switch\";\n        let storage = sessionStorage.getItem(data);\n        if (storage) {\n            let options = JSON.parse(storage);\n            if (!options) {\n                alert(\"Please turn on cookies to display content!\");\n            }\n            let url = new URL(location.href);\n            let urlParam = new URLSearchParams(url.search);\n            // variant is found by comparing variant config opt with custom element attr opt\n            try {\n                var variant_check = options.variants.find((v) => v.opt === opt);\n            }\n            catch (err) {\n                console.log(\"No option parameters found. Creating default parameters to continue.\");\n            }\n            var variant = paramCheck(variant_check, { opt: opt });\n            // check for option param or return default value\n            var active = paramCheck(options.active_class, \"active\");\n            // check if sizes object with font sizes is not null or undefined\n            try {\n                var hide_check = variant.hide;\n            }\n            catch (err) {\n                console.log(\"Hide object not found. Creating default parameters.\");\n            }\n            let hide_checked = paramCheck(hide_check, {\n                hidden: true,\n                class_to_hide: \"hide-container1\",\n                class_to_show: \"show-container1\",\n                class_parent: \"hide-show-wrapper\",\n                resize: \"resize-hide\",\n            });\n            // get classes from params for container to hide and show\n            let hidden = paramCheck(hide_checked.hidden, true);\n            let hide = paramCheck(hide_checked.class_to_hide, \"hide-container1\");\n            let show = paramCheck(hide_checked.class_to_show, \"show-container1\");\n            let resize = paramCheck(hide_checked.resize, \"resize-hide\");\n            // get class for wrapper of hide show container\n            let parent = paramCheck(hide_checked.class_parent, \"hide-show-wrapper\");\n            // get urlparam key\n            var urlparam = paramCheck(variant.urlparam, \"image\");\n            // get fade class\n            let fade = paramCheck(variant.fade, \"fade\");\n            // check if sizes object with font sizes is not null or undefined\n            try {\n                var small_check = variant.column_small;\n            }\n            catch (err) {\n                console.log(\"Hide object not found. Creating default parameters.\");\n            }\n            let column_small_check = paramCheck(small_check, {\n                class: \"col-md-6\",\n                percent: \"50%\",\n            });\n            // check if sizes object with font sizes is not null or undefined\n            try {\n                var large_check = variant.column_full;\n            }\n            catch (err) {\n                console.log(\"Hide object not found. Creating default parameters.\");\n            }\n            let column_full_checked = paramCheck(large_check, {\n                class: \"col-md-12\",\n                percent: \"100%\",\n            });\n            // get classes and style for hide show container resizing\n            let column_small = [\n                paramCheck(column_small_check.class, \"col-md-6\"),\n                paramCheck(column_small_check.percent, \"50%\"),\n            ];\n            let column_full = [\n                paramCheck(column_full_checked.class, \"col-md-12\"),\n                paramCheck(column_full_checked.percent, \"100%\"),\n            ];\n            // check if urlparam value is null and set to default\n            if (urlParam.get(urlparam) == null) {\n                urlParam.set(urlparam, \"on\");\n            }\n            // if urlparam value is not valid set to default\n            if (![\"on\", \"off\"].includes(urlParam.get(urlparam))) {\n                console.log(`image=${urlParam.get(urlparam)} is not a selectable option.`);\n                urlParam.set(urlparam, \"on\");\n            }\n            // if urlparam value is 'on' show container\n            if (urlParam.get(urlparam) == \"on\") {\n                document.querySelectorAll(`.${hide}`).forEach((el) => {\n                    el.classList.remove(fade);\n                    el.classList.add(column_small[0]);\n                    el.style.maxWidth = column_small[1];\n                    el.classList.add(active);\n                });\n                document.querySelectorAll(`.${show}`).forEach((el) => {\n                    el.classList.add(column_small[0]);\n                    el.classList.remove(column_full[0]);\n                    el.style.maxWidth = column_small[1];\n                    el.classList.add(active);\n                });\n                document.querySelectorAll(`.${resize}`).forEach((el) => {\n                    el.classList.remove(fade);\n                });\n                document.getElementById(opt).classList.add(active);\n                /* if value is off it should not be part of the urlsearchparams */\n                urlParam.delete(urlparam);\n            }\n            // if urlparam value is 'off' hide container\n            if (urlParam.get(urlparam) == \"off\") {\n                document.querySelectorAll(`.${hide}`).forEach((el) => {\n                    el.classList.add(fade);\n                    el.classList.remove(column_small[0]);\n                    el.style.maxWidth = column_full[1];\n                    el.classList.remove(active);\n                });\n                document.querySelectorAll(`.${show}`).forEach((el) => {\n                    el.classList.remove(column_small[0]);\n                    el.classList.add(column_full[0]);\n                    el.style.maxWidth = column_full[1];\n                    el.classList.remove(active);\n                });\n                document.querySelectorAll(`.${resize}`).forEach((el) => {\n                    el.classList.add(fade);\n                });\n                // works only with one image viewer\n                try {\n                    var viewer = document.querySelector(`.${parent}.${active} .${hide}`);\n                }\n                catch (err) {\n                    console.log(`HTML class elements .${parent}.${active} .${hide} not found. Please make sure your HTML site contains them.`);\n                }\n                try {\n                    var facs = viewer.querySelectorAll(\"*\")[0];\n                    // set style height and width\n                    // get iamge_size from params\n                    // let image_size = paramCheck(variant.image_size, \"500px\");\n                    facs.style.width = `${viewer.offsetWidth}px`;\n                    facs.style.height = `${viewer.offsetHeight}px`;\n                }\n                catch (err) {\n                    console.log(`HTML class elements .${parent}.${active} .${hide} not found. Please make sure your HTML site contains them.`);\n                }\n                // remove active class\n                document.getElementById(opt).classList.remove(active);\n            }\n            // get citation url class and update citation\n            let citation_url_str = paramCheck(variant.chg_citation, \"citation-url\");\n            let citation_url = document.getElementById(citation_url_str);\n            // update browser history state\n            let href = `?${urlParam}${location.hash}`;\n            uptState({\n                hist: true,\n                cit: citation_url,\n                state: false,\n                href: href,\n            });\n        }\n    }\n    textFeatures() {\n        let data = \"annotation_slider\";\n        let storage = sessionStorage.getItem(data);\n        if (storage) {\n            let options = JSON.parse(storage);\n            if (!options) {\n                alert(`Please turn on cookies to display content.\\n\n                    Or check if configuration files path match data-target and data-path property.`);\n            }\n            let url = new URL(location.href);\n            let urlParam = new URLSearchParams(url.search);\n            // variant is found by comparing variant config opt with custom element attr opt\n            try {\n                var variant_all_check = options.variants.filter((v) => v.features.all === true);\n            }\n            catch (err) {\n                console.log(\"No option parameters found. Creating default parameters to continue.\");\n            }\n            let variantAll = paramCheck(variant_all_check, [\n                {\n                    opt: \"text-features\",\n                    features: {\n                        all: true,\n                        class: \"all-features\",\n                    },\n                },\n            ]);\n            // variant is found by comparing variant config opt with custom element attr opt\n            try {\n                var variant_check = options.variants.filter((v) => v.features.all === false);\n            }\n            catch (err) {\n                console.log(\"No option parameters found. Creating default parameters to continue.\");\n            }\n            let allVariants = document.getElementsByTagName(\"annotation-slider\");\n            let allVariantsObjs = [];\n            for (let i in allVariants) {\n                try {\n                    var attrOpt = allVariants[i].getAttribute(\"opt\");\n                }\n                catch (err) {\n                    // console.log(err);\n                }\n                if (attrOpt) {\n                    allVariantsObjs.push({\n                        opt: attrOpt,\n                        features: {\n                            all: false,\n                            class: \"single-feature\",\n                        },\n                    });\n                }\n            }\n            let variants = paramCheck(variant_check, allVariantsObjs);\n            // try {\n            //     var features_check = variants.features;\n            // } catch (err) {\n            //     console.log(\"Features object in variant not found. Creating default parameters.\")\n            // }\n            // let features = paramCheck(features_check, {\n            //     all: false,\n            //     class: \"single-feature\"\n            // })\n            // variant is found by comparing variant config opt with custom element attr opt\n            try {\n                var variant_check_bool = options.variants.filter((v) => typeof v.features.all !== \"boolean\");\n            }\n            catch (err) {\n                console.log(\"No option parameters found. Creating default parameters to continue.\");\n            }\n            let wrg_ft = paramCheck(variant_check_bool, []);\n            if (wrg_ft) {\n                for (let w of wrg_ft) {\n                    console.log(`Type of variant ${w} config. \"features.all\" must be boolean (true or false)`);\n                }\n            }\n            // check if sizes object with font sizes is not null or undefined\n            try {\n                var span_check = options.span_element;\n            }\n            catch (err) {\n                console.log(\"Hide object not found. Creating default parameters.\");\n            }\n            let span_checked = paramCheck(span_check, {\n                css_class: \"badge-item\",\n            });\n            // get params from options\n            let style = paramCheck(span_checked, \"badge-item\");\n            let active = paramCheck(options.active_class, \"active\");\n            // set count to verify state of sliders\n            let count_active = 0;\n            let count = 0;\n            var optAll = paramCheck(variantAll[0].opt, `text-features`);\n            for (let v in variants) {\n                let opt = paramCheck(variants[v].opt, `any-feature-${v}`);\n                let color = paramCheck(variants[v].color, `color-${opt}`);\n                let html_class = paramCheck(variants[v].html_class, `html-class-${opt}`);\n                let css_class = paramCheck(variants[v].css_class, `css-class-${opt}`);\n                let opt_slider = paramCheck(variants[v].opt_slider, `${opt}-slider`);\n                let hide = paramCheck(variants[v].hide, false);\n                if (urlParam.get(opt) === null) {\n                    if (variants[v].default === true) {\n                        // if default is true\n                        count_active += 1;\n                        let selected = addMarkup(html_class, css_class, color, hide, style);\n                        try {\n                            let slider = document.getElementById(opt_slider);\n                            slider.setAttribute(\"data\", selected);\n                            count += parseInt(selected);\n                            slider.classList.add(\"slider-number\");\n                            slider.classList.add(color);\n                            urlParam.set(opt, \"on\");\n                        }\n                        catch (err) {\n                            console.log(`slider class ${opt_slider} not found!`);\n                        }\n                        if (document.getElementById(opt).checked ===\n                            false) {\n                            document.getElementById(opt).checked = true;\n                            document.getElementById(opt).classList.add(active);\n                        }\n                    }\n                    else {\n                        // urlParam.set(opt, \"off\");\n                        let selected = removeMarkup(html_class, css_class, color, hide, style);\n                        try {\n                            let slider = document.getElementById(opt_slider);\n                            slider.classList.remove(color);\n                            slider.removeAttribute(\"data\");\n                            slider.classList.remove(\"slider-number\");\n                        }\n                        catch (err) {\n                            console.log(`slider class ${opt_slider} not found!`);\n                        }\n                        if (document.getElementById(opt).checked ===\n                            true) {\n                            document.getElementById(opt).checked =\n                                false;\n                            document.getElementById(opt).classList.remove(active);\n                        }\n                    }\n                }\n                else if (![\"on\", \"off\"].includes(urlParam.get(opt))) {\n                    console.log(`${opt}=${urlParam.get(opt)} is not a selectable option.`);\n                    urlParam.set(opt, \"off\");\n                    let selected = removeMarkup(html_class, css_class, color, hide, style);\n                    try {\n                        let slider = document.getElementById(opt_slider);\n                        slider.classList.remove(color);\n                        slider.removeAttribute(\"data\");\n                        slider.classList.remove(\"slider-number\");\n                    }\n                    catch (err) {\n                        console.log(`slider class ${opt_slider} not found!`);\n                    }\n                    if (document.getElementById(opt).checked === true) {\n                        document.getElementById(opt).checked = false;\n                        document.getElementById(opt).classList.remove(active);\n                    }\n                }\n                else if (urlParam.get(opt) === \"on\") {\n                    count_active += 1;\n                    let selected = addMarkup(html_class, css_class, color, hide, style);\n                    try {\n                        let slider = document.getElementById(opt_slider);\n                        slider.setAttribute(\"data\", selected);\n                        count += parseInt(selected);\n                        slider.classList.add(\"slider-number\");\n                        slider.classList.add(color);\n                    }\n                    catch (err) {\n                        console.log(`slider class ${opt_slider} not found!`);\n                    }\n                    if (document.getElementById(opt).checked === false) {\n                        document.getElementById(opt).checked = true;\n                        document.getElementById(opt).classList.add(active);\n                    }\n                }\n                else if (urlParam.get(opt) === \"off\") {\n                    let selected = removeMarkup(html_class, css_class, color, hide, style);\n                    try {\n                        let slider = document.getElementById(opt_slider);\n                        slider.classList.remove(color);\n                        slider.removeAttribute(\"data\");\n                        slider.classList.remove(\"slider-number\");\n                    }\n                    catch (err) {\n                        console.log(`slider class ${opt_slider} not found!`);\n                    }\n                    if (document.getElementById(opt).checked === true) {\n                        document.getElementById(opt).checked = false;\n                        document.getElementById(opt).classList.remove(active);\n                    }\n                    /* default value e.g. off should not be added to url */\n                    urlParam.delete(opt);\n                }\n                let citation_url_str = paramCheck(variants[v].chg_citation, \"citation-url\");\n                if (citation_url_str) {\n                    var citation_url = document.getElementById(citation_url_str);\n                }\n            }\n            if (String(count_active) === String(variants.length)) {\n                if (document.getElementById(optAll).checked ===\n                    false) {\n                    try {\n                        let slider_all = document.getElementById(optAll);\n                        slider_all.checked = true;\n                        slider_all.classList.add(active);\n                        slider_all.classList.add(\"slider-number\");\n                        slider_all.setAttribute(\"data\", String(count));\n                    }\n                    catch (err) {\n                        console.log(`slider class ${optAll} not found!`);\n                    }\n                }\n            }\n            else {\n                if (document.getElementById(optAll).checked === true) {\n                    try {\n                        let slider_all = document.getElementById(optAll);\n                        slider_all.checked = false;\n                        slider_all.classList.remove(active);\n                        slider_all.removeAttribute(\"data\");\n                        slider_all.classList.remove(\"slider-number\");\n                    }\n                    catch (err) {\n                        console.log(`slider class ${optAll} not found!`);\n                    }\n                }\n            }\n            let href = `?${urlParam}${location.hash}`;\n            uptState({\n                hist: true,\n                cit: citation_url,\n                state: false,\n                href: href,\n            });\n        }\n    }\n    pageUrl() {\n        // get session cookies as parameters\n        let data = \"image_loader\";\n        let storage = sessionStorage.getItem(data);\n        var OpenSeadragon = require(\"openseadragon\");\n        if (storage) {\n            let options = JSON.parse(storage);\n            // get url params\n            let url = new URL(location.href);\n            let urlParam = new URLSearchParams(url.search);\n            var urlparam = paramCheck(options.urlparam);\n            var _current = urlParam.get(urlparam);\n            // const item = document.querySelector('.pagination .nav-tabs .nav-item .nav-link.active');\n            // const href = item.getAttribute('href').replace('#', '');\n            if (_current == null) {\n                urlParam.set(urlparam, \"1\");\n                _current = urlParam.get(urlparam);\n            }\n            // set all nav links to inactive\n            let pag_link = paramCheck(options.pag_link, \".pagination-link\");\n            let active = paramCheck(options.active_class, \"active\");\n            let inactive = paramCheck(options.inactive_class, \"fade\");\n            let bootstrap_class = paramCheck(options.bootstrap_class, \"show\");\n            let pag_tab = paramCheck(options.pag_tab, \".pagination-tab.tab-pane\");\n            // deactivate all tabs\n            let tabs = document.querySelectorAll(`${pag_tab}[data-tab=\"paginate\"]`);\n            tabs.forEach(function (el) {\n                el.classList.remove(active);\n                el.classList.add(inactive);\n            });\n            // deactivate pagination linksshow metadata\n            let link = document.querySelectorAll(`${pag_link}`);\n            let pgOpt = [];\n            link.forEach(function (el) {\n                el.classList.remove(active);\n                el.classList.remove(bootstrap_class);\n                let el_id = el.getAttribute(\"id\");\n                if (el_id) {\n                    let idn = el_id.split(\"_\");\n                    let idNo = idn[idn.length - 1];\n                    pgOpt.push(idNo);\n                }\n            });\n            // check if page url param is valid\n            if (!pgOpt.includes(_current)) {\n                console.log(`${urlparam}=${_current} is not a selectable option.`);\n                urlParam.set(urlparam, \"1\");\n                _current = urlParam.get(urlparam);\n            }\n            // activate tab base on urlparams\n            let tab = document.getElementById(`paginate-${_current}`);\n            tab.classList.remove(inactive);\n            tab.classList.add(active);\n            tab.classList.add(bootstrap_class);\n            // get all nav tabs matching href tabs based on urlparams and set to active\n            let linkActive = document.querySelectorAll(`${pag_link}[href=\"#paginate-${_current}\"]`);\n            linkActive.forEach(function (el) {\n                el.classList.add(active);\n                el.classList.add(bootstrap_class);\n            });\n            // create OSD container\n            // check if sizes object with font sizes is not null or undefined\n            try {\n                var type_check = options.img_types;\n            }\n            catch (err) {\n                console.log(\"Hide object not found. Creating default parameters.\");\n            }\n            let type_checked = paramCheck(type_check, [\"type1\", \"type2\"]);\n            // get class where osd img are inserted\n            let opt_osd_target = paramCheck(options.osd_target, \"container\");\n            let opt_img_source = paramCheck(options.img_source, \"container2\");\n            let opt_image_size = paramCheck(options.img_size, \"500px\"); // to be deprecated\n            // find correct image type\n            let i = 0;\n            while (i < type_checked.length) {\n                if (document.getElementById(`${type_checked[i]}_${opt_osd_target}_${_current}`)) {\n                    var _image_type = type_checked[i];\n                }\n                i++;\n            }\n            let _osd_container_id = `${_image_type}_${opt_osd_target}_${_current}`;\n            let _osd_container_id2 = `${_image_type}_${opt_img_source}_${_current}`;\n            let osd_container = document.getElementById(_osd_container_id);\n            let osd_container_2 = document.getElementById(_osd_container_id2);\n            /* ancestor wrapper of osd viewer */\n            let osd_container_2_img = document.getElementById(`img-resize-${_current}`);\n            /* wrapper sibling of resize container to get correct height */\n            let test_container_height = document.getElementById(`text-resize-${_current}`).offsetHeight;\n            if (osd_container_2 && !osd_container_2_img.classList.contains(\"fade\")) {\n                osd_container.style.height = `${test_container_height}px`;\n                let image = document.getElementById(`${_image_type}_img_${_current}`);\n                let image_src = image.getAttribute(\"data-src\");\n                let image_url = { type: \"image\", url: image_src };\n                let viewer = OpenSeadragon({\n                    id: _osd_container_id,\n                    prefixUrl: \"https://cdnjs.cloudflare.com/ajax/libs/openseadragon/4.0.0/images/\",\n                    tileSources: image_url,\n                    // Initial rotation angle\n                    // degrees: 90,\n                    // Show rotation buttons\n                    showRotationControl: true,\n                    // Enable touch rotation on tactile devices\n                    gestureSettingsTouch: {\n                        pinchRotate: true,\n                    },\n                });\n                // hides static images\n                osd_container_2.remove();\n                // hide loading spinner if image fully loaded status changes\n                // see issue: https://github.com/openseadragon/openseadragon/issues/1262\n                viewer.addHandler(\"open\", function () {\n                    let tiledImage = viewer.world.getItemAt(0);\n                    if (tiledImage.getFullyLoaded()) {\n                        hideLoading(_osd_container_id);\n                    }\n                    else {\n                        tiledImage.addOnceHandler(\"fully-loaded-change\", function () {\n                            let spinnerID2 = \"spinner_\" + _osd_container_id;\n                            if (document.getElementById(spinnerID2)) {\n                                document.getElementById(spinnerID2).remove();\n                            }\n                        });\n                    }\n                });\n            }\n            // get citation url class and update citation\n            let citation_url_str = paramCheck(options.chg_citation, \"citation-url\");\n            let citation_url = document.getElementById(citation_url_str);\n            let href = `?${urlParam}${location.hash}`;\n            uptState({\n                hist: true,\n                cit: citation_url,\n                state: false,\n                href: href,\n            });\n        }\n    }\n    multiLanguage() {\n        // get session cookie with configartion json\n        const data = \"multi_language\";\n        const storage = sessionStorage.getItem(data);\n        if (storage) {\n            const options = JSON.parse(storage);\n            /* get current ur */\n            var url = new URL(document.location.href);\n            /* get current url parameters */\n            var urlParam = new URLSearchParams(url.search);\n            /* check if active class was defined or set to default class */\n            var active = paramCheck(options.active_class, \"lang_active\");\n            /* create array of all configured user languages  */\n            var userLang = [];\n            for (let x of options.variants) {\n                userLang.push(x.opt);\n            }\n            /* ############################################### */\n            /*  verifying if urlparam set is valid */\n            /* ############################################### */\n            if (urlParam.get(\"lang\") == null) {\n                /* get current browser language */\n                var lang = navigator.language;\n                /* check if browser language is in configuration options */\n                var langUpdate = userLang.includes(lang.split(\"-\")[0])\n                    ? lang.split(\"-\")[0]\n                    : \"en\";\n                urlParam.set(\"lang\", langUpdate);\n            }\n            else if (!userLang.includes(urlParam.get(\"lang\"))) {\n                /* check if urlparam set fits to configuration options */\n                urlParam.set(\"lang\", \"en\");\n                var langUpdate = \"en\";\n                console.log(`lang urlparameter does not fit webpage configuration.\n                    set to default language.`);\n            }\n            else {\n                /* get urlparam set */\n                var langUpdate = urlParam.get(\"lang\");\n            }\n            // use try/catch to verify if object exists in options\n            try {\n                var variants_check = options.variants.filter((v) => v.opt !== langUpdate);\n            }\n            catch (err) {\n                console.log(\"No option parameters found. Creating default parameters to continue.\");\n            }\n            // all variants except current clicked\n            var variants = paramCheck(variants_check, [\n                {\n                    opt: langUpdate,\n                },\n            ]);\n            // configuration holds an array with variants with at least one variant object.\n            // to match the custom element with the configuration the opt value must match.\n            // variant is found by comparing variant config opt with custom element attr opt\n            try {\n                var variant_check = options.variants.find((v) => v.opt === langUpdate);\n            }\n            catch (err) {\n                console.log(\"No option parameters found. Creating default parameters to continue.\");\n            }\n            // variant as selected in UI\n            let variant = paramCheck(variant_check, {\n                opt: langUpdate,\n            });\n            if (!variant) {\n                console.log(\"No variant found! Please define a variant object that contains \\\n                  and 'opt' key holding a string value that matches the 'opt' value of custom \\\n                  element 'annotation#slider'.\");\n            }\n            /* remove active class from variants not clicked */\n            variants.forEach((el) => {\n                document.getElementById(`ml_${el.opt}`).classList.remove(active);\n            });\n            /* set current clicked variant active with class and change state of urlparam */\n            let current = document.getElementById(`ml_${variant.opt}`);\n            current.classList.add(active);\n            /* check if language mappings is available */\n            var map = paramCheck(variant.map, { \"index.html\": \"index-en.html\" });\n            if (map) {\n                /* must be replaced in production\n                  get pathname and specific filename\n                  set new path based on mappings from mappings json\n                  key in mappings = filename */\n                let path = location.pathname.split(\"/\");\n                let newPath = path.length == 3 && path[2].length > 0\n                    ? map[path[2]]\n                    : path.length == 2 && path[1].length > 0\n                        ? map[path[1]]\n                        : map[\"index.html\"];\n                if (newPath) {\n                    // current state of the annotation sliders is saved in the url parameters\n                    // current state is also saved in window history (back/forward browser button)\n                    var state = {\n                        lang: variant.opt,\n                    };\n                    let href = `${newPath}?${urlParam}${location.hash}`;\n                    uptState({\n                        hist: true,\n                        state: state,\n                        href: href,\n                    });\n                }\n            }\n        }\n    }\n}\n","const { uptState, paramCheck } = require(\"../../utils/utils\");\nexport class MultiLanguage extends HTMLElement {\n    static get observedAttributes() {\n        return [\"opt\"];\n    }\n    connectedCallback() {\n        this.render();\n        this.childNodes[1].addEventListener(\"click\", this.multiLanguage);\n        // console.log(this.childNodes[1]);\n    }\n    // function to triggers on click of the rendered element\n    multiLanguage() {\n        // get session cookie with configartion json\n        let data = \"multi_language\";\n        let storage = sessionStorage.getItem(data);\n        if (storage) {\n            let options = JSON.parse(storage);\n            // get current url parameters\n            let url = new URL(window.location.href);\n            // let hash = url.hash;\n            let urlParam = new URLSearchParams(url.search);\n            // get id of rendered html element. opt value of custom element is used as ID.\n            let id = this.getAttribute(\"id\").split(\"ml_\")[1];\n            if (!id) {\n                console.log(\"ID of multi language custom child element not found. \\\n                Make sure the annotation-slider element holds the attribute 'opt' with \\\n                a defined string value.\");\n            }\n            // configuration holds an array with variants with at least one variant object.\n            // to match the custom element with the configuration the opt value must match.\n            // variant is found by comparing variant config opt with custom element attr opt\n            try {\n                var variant_check = options.variants.find((v) => v.opt === id);\n            }\n            catch (err) {\n                console.log(\"No option parameters found. Creating default parameters to continue.\");\n            }\n            // variant as selected in UI\n            let variant = paramCheck(variant_check, {\n                opt: id,\n            });\n            if (!variant) {\n                console.log(\"No variant found! Please define a variant object that contains \\\n                and 'opt' key holding a string value that matches the 'opt' value of custom \\\n                element 'annotation#slider'.\");\n            }\n            /* check if language mappings is available */\n            var map = paramCheck(variant.map, { \"index.html\": \"index-en.html\" });\n            /* save state in urlparam lang */\n            urlParam.set(\"lang\", variant.opt);\n            if (map) {\n                /* must be replaced in production\n                get pathname and specific filename\n                set new path based on mappings from mappings json\n                key in mappings = filename */\n                let path = location.pathname.split(\"/\");\n                let newPath = path.length == 3 && path[2].length > 0\n                    ? map[path[2]]\n                    : path.length == 2 && path[1].length > 0\n                        ? map[path[1]]\n                        : map[\"index.html\"];\n                if (newPath) {\n                    // current state of the annotation sliders is saved in the url parameters\n                    // current state is also saved in window history (back/forward browser button)\n                    var state = {\n                        lang: variant.opt,\n                    };\n                    let href = `${newPath}?${urlParam}${location.hash}`;\n                    uptState({\n                        hist: true,\n                        state: state,\n                        href: href,\n                    });\n                    /* reload document after replaceState or url href */\n                    location.reload();\n                    return false;\n                }\n            }\n        }\n    }\n    // function to render HTML element inside the custom element\n    render() {\n        let data = \"multi_language\";\n        let storage = sessionStorage.getItem(data);\n        let options = JSON.parse(storage);\n        let opt = this.getAttribute(\"opt\");\n        // check if user set opt attribute\n        if (typeof opt !== \"string\") {\n            console.log(\"No 'opt' attribute in custom element font-family found!\");\n        }\n        // variant is found by comparing variant config opt with custom element attr opt\n        try {\n            var variant_check = options.variants.find((v) => v.opt === opt);\n        }\n        catch (err) {\n            console.log(\"No option parameters found. Creating default parameters to continue.\");\n        }\n        var variant = paramCheck(variant_check, {\n            opt: opt,\n        });\n        let title = paramCheck(variant.title, \"English\");\n        let v_class = paramCheck(variant.class, \"nav-link pointer\");\n        this.innerHTML = `\n        <a id=\"ml_${variant.opt}\" class=\"${v_class}\">${title}</a>\n      `;\n    }\n    attributeChangedCallback() {\n        this.render();\n    }\n    disconnectedCallback() {\n        this.childNodes[1].removeEventListener(\"click\", this.multiLanguage);\n    }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(2);\n"],"names":["removeMarkup","html_class","css_class","color","hide","style","selected","document","querySelectorAll","forEach","el","Object","css","classList","contains","remove","add","hde","hidden","err","console","log","cls","class","display","String","length","addMarkup","uptState","options","hist","window","history","replaceState","href","state","pushState","cit","innerHTML","location","hostname","pathname","setAttribute","hideLoading","id","spinnerID","getElementById","paramCheck","param","def","module","exports","OpenSeadragon","SetDataCookie","constructor","this","aot","AnnotationSlider","fs","FullSize","fos","FontSize","ff","FontFamily","is","ImageSwitch","il","ImageLoader","ep","EditionPagination","wr","WindowResize","up","UrlSearchParamUpdate","upc","lang","MultiLanguage","build","e","customElements","define","onload","textFeatures","fullSreen","fontSize","fontFamily","viewerSwitch","pageUrl","multiLanguage","onpopstate","hash","querySelector","scrollIntoView","behavior","backgroundColor","setTimeout","name","config","sessionStorage","setItem","JSON","stringify","HTMLElement","observedAttributes","connectedCallback","render","childNodes","addEventListener","storage","getItem","parse","url","URL","urlParam","URLSearchParams","search","getAttribute","variant_check","variants","find","v","opt","variant","features","all","features_check","variants_check","filter","none_variant_check","none_variant","style_check","span_element","active","active_class","allClass","checked","slider_str","opt_slider","slider","removeAttribute","delete","count","set","parseInt","feat_leader","g","variants_checked","variants_group","citation_url_str","chg_citation","citation_url","data","title","rendered_element_check","rendered_element","label_class","slider_class","render_class","attributeChangedCallback","disconnectedCallback","removeEventListener","fullScreen","to_hide","urlparam","get","a_class","svg","render_svg","opt_title","var_opt","p_change","paragraph","p_class","size_check","sizes","size","default","font_size_14","font_size_18","font_size_22","font_size_26","value","replace","s","stateName","s_html","option","split","slice","family_check","fonts","family","font1","font2","font3","toLowerCase","alert","hide_check","hide_checked","class_to_hide","class_to_show","class_parent","resize","show","parent","fade","small_check","column_small","column_small_check","percent","large_check","column_full","column_full_checked","maxWidth","getElementsByClassName","viewer_loaded","facs","facsContainer","width","offsetWidth","height","offsetHeight","image_loader","image_loader_type","image_loader_pos","image","_osd_container_id","osd_container","osd_container_2","text_container_height","image_container_width","image_src","viewer","prefixUrl","tileSources","type","showRotationControl","gestureSettingsTouch","pinchRotate","addHandler","tiledImage","world","getItemAt","getFullyLoaded","addOnceHandler","spinnerID2","render_check","var_title","url_param","pos","data_type","dataSource","updateImgPage","dataTab","hrefState","pag_link","link","bootstrap_class","pag_tab","opt_url","opt_urlparam","opt_osd_target","osd_target","opt_img_source","img_source","opt_image_size","img_size","targetID0","dataType","targetID1","target","push","isResizing","container","left_container","right_container","handle","viewer_wrapper","text","offsetLeft","clientX","offsetRight","w","innerWidth","parseFloat","getElementsByTagName","includes","btn","values","new_value","f","variant_all_check","variantAll","allVariants","allVariantsObjs","i","attrOpt","variant_check_bool","wrg_ft","span_check","span_checked","count_active","optAll","slider_all","_current","inactive","inactive_class","pgOpt","el_id","idn","idNo","tab","type_check","img_types","type_checked","_image_type","_osd_container_id2","osd_container_2_img","test_container_height","userLang","x","navigator","language","langUpdate","map","path","newPath","reload","v_class","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","d","definition","key","o","defineProperty","enumerable","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","__webpack_exports__"],"sourceRoot":""}